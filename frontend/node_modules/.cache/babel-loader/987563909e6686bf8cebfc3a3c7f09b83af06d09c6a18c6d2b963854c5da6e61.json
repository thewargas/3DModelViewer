{"ast":null,"code":"import e from \"@reach/portal\";\nimport n, { useRef as r, useDebugValue as t, useEffect as o, useLayoutEffect as i, useState as a, useCallback as c, useMemo as u, useImperativeHandle as s, forwardRef as l } from \"react\";\nimport { useMachine as d } from \"@xstate/react\";\nimport { useSpring as f, interpolate as v, animated as m, config as p } from \"react-spring\";\nimport { useDrag as y, rubberbandIfOutOfBounds as h } from \"react-use-gesture\";\nimport { createFocusTrap as g } from \"focus-trap\";\nimport { disableBodyScroll as S, enableBodyScroll as E } from \"body-scroll-lock\";\nimport { ResizeObserver as P } from \"@juggle/resize-observer\";\nimport { Machine as b, assign as R } from \"xstate\";\nfunction x() {\n  return x = Object.assign || function (e) {\n    for (var n = 1; n < arguments.length; n++) {\n      var r = arguments[n];\n      for (var t in r) Object.prototype.hasOwnProperty.call(r, t) && (e[t] = r[t]);\n    }\n    return e;\n  }, x.apply(this, arguments);\n}\nfunction C(e, n) {\n  if (null == e) return {};\n  var r,\n    t,\n    o = {},\n    i = Object.keys(e);\n  for (t = 0; t < i.length; t++) n.indexOf(r = i[t]) >= 0 || (o[r] = e[r]);\n  return o;\n}\nvar O = \"undefined\" != typeof window ? i : o;\nfunction N(e, n, r) {\n  return n = (n = +n) == n ? n : 0, r = (r = +r) == r ? r : 0, (e = +e) == e && (e = (e = e <= r ? e : r) >= n ? e : n), e;\n}\nfunction w(e) {\n  var n = Math.round(e);\n  if (Number.isNaN(e)) throw new TypeError(\"Found a NaN! Check your snapPoints / defaultSnap / snapTo \");\n  return n;\n}\nvar H = {\n  box: \"border-box\"\n};\nfunction D(e, n) {\n  var r = n.label,\n    o = n.enabled,\n    i = n.resizeSourceRef,\n    u = a(0),\n    s = u[0],\n    l = u[1];\n  t(r + \": \" + s);\n  var d = c(function (e) {\n    l(e[0].borderBoxSize[0].blockSize), i.current = \"element\";\n  }, [i]);\n  return O(function () {\n    if (e.current && o) {\n      var n = new P(d);\n      return n.observe(e.current, H), function () {\n        n.disconnect();\n      };\n    }\n  }, [e, d, o]), o ? s : 0;\n}\nfunction k(e) {\n  return void 0 === e && (e = 1e3), new Promise(function (n) {\n    return setTimeout(n, e);\n  });\n}\nvar z = {\n    DRAG: {\n      target: \"#overlay.dragging\",\n      actions: \"onOpenEnd\"\n    }\n  },\n  j = {\n    RESIZE: {\n      target: \"#overlay.resizing\",\n      actions: \"onOpenEnd\"\n    }\n  },\n  A = b({\n    id: \"overlay\",\n    initial: \"closed\",\n    context: {\n      initialState: \"CLOSED\"\n    },\n    states: {\n      closed: {\n        on: {\n          OPEN: \"opening\",\n          CLOSE: void 0\n        }\n      },\n      opening: {\n        initial: \"start\",\n        states: {\n          start: {\n            invoke: {\n              src: \"onOpenStart\",\n              onDone: \"transition\"\n            }\n          },\n          transition: {\n            always: [{\n              target: \"immediately\",\n              cond: \"initiallyOpen\"\n            }, {\n              target: \"smoothly\",\n              cond: \"initiallyClosed\"\n            }]\n          },\n          immediately: {\n            initial: \"open\",\n            states: {\n              open: {\n                invoke: {\n                  src: \"openImmediately\",\n                  onDone: \"activating\"\n                }\n              },\n              activating: {\n                invoke: {\n                  src: \"activate\",\n                  onDone: \"#overlay.opening.end\"\n                },\n                on: x({}, z, j)\n              }\n            }\n          },\n          smoothly: {\n            initial: \"visuallyHidden\",\n            states: {\n              visuallyHidden: {\n                invoke: {\n                  src: \"renderVisuallyHidden\",\n                  onDone: \"activating\"\n                }\n              },\n              activating: {\n                invoke: {\n                  src: \"activate\",\n                  onDone: \"open\"\n                }\n              },\n              open: {\n                invoke: {\n                  src: \"openSmoothly\",\n                  onDone: \"#overlay.opening.end\"\n                },\n                on: x({}, z, j)\n              }\n            }\n          },\n          end: {\n            invoke: {\n              src: \"onOpenEnd\",\n              onDone: \"done\"\n            },\n            on: {\n              CLOSE: \"#overlay.closing\",\n              DRAG: \"#overlay.dragging\"\n            }\n          },\n          done: {\n            type: \"final\"\n          }\n        },\n        on: x({}, {\n          CLOSE: {\n            target: \"#overlay.closing\",\n            actions: \"onOpenCancel\"\n          }\n        }),\n        onDone: \"open\"\n      },\n      open: {\n        on: {\n          DRAG: \"#overlay.dragging\",\n          SNAP: \"snapping\",\n          RESIZE: \"resizing\"\n        }\n      },\n      dragging: {\n        on: {\n          SNAP: \"snapping\"\n        }\n      },\n      snapping: {\n        initial: \"start\",\n        states: {\n          start: {\n            invoke: {\n              src: \"onSnapStart\",\n              onDone: \"snappingSmoothly\"\n            },\n            entry: [R({\n              y: function y(e, n) {\n                return n.payload.y;\n              },\n              velocity: function velocity(e, n) {\n                return n.payload.velocity;\n              },\n              snapSource: function snapSource(e, n) {\n                var r = n.payload.source;\n                return void 0 === r ? \"custom\" : r;\n              }\n            })]\n          },\n          snappingSmoothly: {\n            invoke: {\n              src: \"snapSmoothly\",\n              onDone: \"end\"\n            }\n          },\n          end: {\n            invoke: {\n              src: \"onSnapEnd\",\n              onDone: \"done\"\n            },\n            on: {\n              RESIZE: \"#overlay.resizing\",\n              SNAP: \"#overlay.snapping\",\n              CLOSE: \"#overlay.closing\",\n              DRAG: \"#overlay.dragging\"\n            }\n          },\n          done: {\n            type: \"final\"\n          }\n        },\n        on: {\n          SNAP: {\n            target: \"snapping\",\n            actions: \"onSnapEnd\"\n          },\n          RESIZE: {\n            target: \"#overlay.resizing\",\n            actions: \"onSnapCancel\"\n          },\n          DRAG: {\n            target: \"#overlay.dragging\",\n            actions: \"onSnapCancel\"\n          },\n          CLOSE: {\n            target: \"#overlay.closing\",\n            actions: \"onSnapCancel\"\n          }\n        },\n        onDone: \"open\"\n      },\n      resizing: {\n        initial: \"start\",\n        states: {\n          start: {\n            invoke: {\n              src: \"onResizeStart\",\n              onDone: \"resizingSmoothly\"\n            }\n          },\n          resizingSmoothly: {\n            invoke: {\n              src: \"resizeSmoothly\",\n              onDone: \"end\"\n            }\n          },\n          end: {\n            invoke: {\n              src: \"onResizeEnd\",\n              onDone: \"done\"\n            },\n            on: {\n              SNAP: \"#overlay.snapping\",\n              CLOSE: \"#overlay.closing\",\n              DRAG: \"#overlay.dragging\"\n            }\n          },\n          done: {\n            type: \"final\"\n          }\n        },\n        on: {\n          RESIZE: {\n            target: \"resizing\",\n            actions: \"onResizeEnd\"\n          },\n          SNAP: {\n            target: \"snapping\",\n            actions: \"onResizeCancel\"\n          },\n          DRAG: {\n            target: \"#overlay.dragging\",\n            actions: \"onResizeCancel\"\n          },\n          CLOSE: {\n            target: \"#overlay.closing\",\n            actions: \"onResizeCancel\"\n          }\n        },\n        onDone: \"open\"\n      },\n      closing: {\n        initial: \"start\",\n        states: {\n          start: {\n            invoke: {\n              src: \"onCloseStart\",\n              onDone: \"deactivating\"\n            },\n            on: {\n              OPEN: {\n                target: \"#overlay.open\",\n                actions: \"onCloseCancel\"\n              }\n            }\n          },\n          deactivating: {\n            invoke: {\n              src: \"deactivate\",\n              onDone: \"closingSmoothly\"\n            }\n          },\n          closingSmoothly: {\n            invoke: {\n              src: \"closeSmoothly\",\n              onDone: \"end\"\n            }\n          },\n          end: {\n            invoke: {\n              src: \"onCloseEnd\",\n              onDone: \"done\"\n            },\n            on: {\n              OPEN: {\n                target: \"#overlay.opening\",\n                actions: \"onCloseCancel\"\n              }\n            }\n          },\n          done: {\n            type: \"final\"\n          }\n        },\n        on: {\n          CLOSE: void 0,\n          OPEN: {\n            target: \"#overlay.opening\",\n            actions: \"onCloseCancel\"\n          }\n        },\n        onDone: \"closed\"\n      }\n    },\n    on: {\n      CLOSE: \"closing\"\n    }\n  }, {\n    actions: {\n      onOpenCancel: function onOpenCancel(e, n) {},\n      onSnapCancel: function onSnapCancel(e, n) {},\n      onResizeCancel: function onResizeCancel(e, n) {},\n      onCloseCancel: function onCloseCancel(e, n) {},\n      onOpenEnd: function onOpenEnd(e, n) {},\n      onSnapEnd: function onSnapEnd(e, n) {},\n      onRezizeEnd: function onRezizeEnd(e, n) {}\n    },\n    services: {\n      onSnapStart: function onSnapStart() {\n        try {\n          return Promise.resolve(k()).then(function () {});\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      },\n      onOpenStart: function onOpenStart() {\n        try {\n          return Promise.resolve(k()).then(function () {});\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      },\n      onCloseStart: function onCloseStart() {\n        try {\n          return Promise.resolve(k()).then(function () {});\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      },\n      onResizeStart: function onResizeStart() {\n        try {\n          return Promise.resolve(k()).then(function () {});\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      },\n      onSnapEnd: function onSnapEnd() {\n        try {\n          return Promise.resolve(k()).then(function () {});\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      },\n      onOpenEnd: function onOpenEnd() {\n        try {\n          return Promise.resolve(k()).then(function () {});\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      },\n      onCloseEnd: function onCloseEnd() {\n        try {\n          return Promise.resolve(k()).then(function () {});\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      },\n      onResizeEnd: function onResizeEnd() {\n        try {\n          return Promise.resolve(k()).then(function () {});\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      },\n      renderVisuallyHidden: function renderVisuallyHidden(e, n) {\n        try {\n          return Promise.resolve(k()).then(function () {});\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      },\n      activate: function activate(e, n) {\n        try {\n          return Promise.resolve(k()).then(function () {});\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      },\n      deactivate: function deactivate(e, n) {\n        try {\n          return Promise.resolve(k()).then(function () {});\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      },\n      openSmoothly: function openSmoothly(e, n) {\n        try {\n          return Promise.resolve(k()).then(function () {});\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      },\n      openImmediately: function openImmediately(e, n) {\n        try {\n          return Promise.resolve(k()).then(function () {});\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      },\n      snapSmoothly: function snapSmoothly(e, n) {\n        try {\n          return Promise.resolve(k()).then(function () {});\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      },\n      resizeSmoothly: function resizeSmoothly(e, n) {\n        try {\n          return Promise.resolve(k()).then(function () {});\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      },\n      closeSmoothly: function closeSmoothly(e, n) {\n        try {\n          return Promise.resolve(k()).then(function () {});\n        } catch (e) {\n          return Promise.reject(e);\n        }\n      }\n    },\n    guards: {\n      initiallyClosed: function initiallyClosed(e) {\n        return \"CLOSED\" === e.initialState;\n      },\n      initiallyOpen: function initiallyOpen(e) {\n        return \"OPEN\" === e.initialState;\n      }\n    }\n  }),\n  L = [\"children\", \"sibling\", \"className\", \"footer\", \"header\", \"open\", \"initialState\", \"lastSnapRef\", \"initialFocusRef\", \"onDismiss\", \"maxHeight\", \"defaultSnap\", \"snapPoints\", \"blocking\", \"scrollLocking\", \"style\", \"onSpringStart\", \"onSpringCancel\", \"onSpringEnd\", \"reserveScrollBarGap\", \"expandOnContentDrag\"],\n  T = [\"velocity\"],\n  M = [\"onRest\", \"config\"],\n  I = p.default,\n  F = I.tension,\n  G = I.friction,\n  Z = n.forwardRef(function (e, i) {\n    var l = e.children,\n      p = e.sibling,\n      P = e.className,\n      b = e.footer,\n      R = e.header,\n      H = e.open,\n      k = e.initialState,\n      z = e.lastSnapRef,\n      j = e.initialFocusRef,\n      I = e.onDismiss,\n      Z = e.maxHeight,\n      K = e.defaultSnap,\n      J = void 0 === K ? q : K,\n      Q = e.snapPoints,\n      U = void 0 === Q ? V : Q,\n      W = e.blocking,\n      X = void 0 === W || W,\n      Y = e.scrollLocking,\n      $ = void 0 === Y || Y,\n      _ = e.style,\n      ee = e.onSpringStart,\n      ne = e.onSpringCancel,\n      re = e.onSpringEnd,\n      te = e.reserveScrollBarGap,\n      oe = void 0 === te ? X : te,\n      ie = e.expandOnContentDrag,\n      ae = void 0 !== ie && ie,\n      ce = C(e, L),\n      ue = function () {\n        var e = a(!1),\n          n = e[0],\n          r = e[1],\n          t = a({}),\n          i = t[0],\n          u = t[1],\n          s = c(function (e) {\n            return u(function (n) {\n              var r;\n              return x({}, n, ((r = {})[e] = !1, r));\n            }), function () {\n              u(function (n) {\n                var r;\n                return x({}, n, ((r = {})[e] = !0, r));\n              });\n            };\n          }, []);\n        return o(function () {\n          var e = Object.values(i);\n          0 !== e.length && e.every(Boolean) && r(!0);\n        }, [i]), {\n          ready: n,\n          registerReady: s\n        };\n      }(),\n      se = ue.ready,\n      le = ue.registerReady,\n      de = r(!1),\n      fe = r(ee),\n      ve = r(ne),\n      me = r(re);\n    o(function () {\n      fe.current = ee, ve.current = ne, me.current = re;\n    }, [ne, ee, re]);\n    var pe,\n      ye,\n      he = f(function () {\n        return {\n          y: 0,\n          ready: 0,\n          maxHeight: 0,\n          minSnap: 0,\n          maxSnap: 0\n        };\n      }),\n      ge = he[0],\n      Se = he[1],\n      Ee = r(null),\n      Pe = r(null),\n      be = r(null),\n      Re = r(null),\n      xe = r(null),\n      Ce = r(null),\n      Oe = r(0),\n      Ne = r(),\n      we = r(!1),\n      He = (pe = u(function () {\n        return \"undefined\" != typeof window ? window.matchMedia(\"(prefers-reduced-motion: reduce)\") : null;\n      }, []), ye = r(null == pe ? void 0 : pe.matches), t(ye.current ? \"reduce\" : \"no-preference\"), o(function () {\n        var e = function e(_e) {\n          ye.current = _e.matches;\n        };\n        return null == pe || pe.addListener(e), function () {\n          return null == pe ? void 0 : pe.removeListener(e);\n        };\n      }, [pe]), ye),\n      De = function (e) {\n        var n = e.targetRef,\n          i = e.enabled,\n          a = e.reserveScrollBarGap,\n          c = r({\n            activate: function activate() {\n              throw new TypeError(\"Tried to activate scroll lock too early\");\n            },\n            deactivate: function deactivate() {}\n          });\n        return t(i ? \"Enabled\" : \"Disabled\"), o(function () {\n          if (!i) return c.current.deactivate(), void (c.current = {\n            activate: function activate() {},\n            deactivate: function deactivate() {}\n          });\n          var e = n.current,\n            r = !1;\n          c.current = {\n            activate: function activate() {\n              r || (r = !0, S(e, {\n                allowTouchMove: function allowTouchMove(e) {\n                  return e.closest(\"[data-body-scroll-lock-ignore]\");\n                },\n                reserveScrollBarGap: a\n              }));\n            },\n            deactivate: function deactivate() {\n              r && (r = !1, E(e));\n            }\n          };\n        }, [i, n, a]), c;\n      }({\n        targetRef: Pe,\n        enabled: se && $,\n        reserveScrollBarGap: oe\n      }),\n      ke = function (e) {\n        var n = e.targetRef,\n          i = e.enabled,\n          a = r({\n            activate: function activate() {\n              throw new TypeError(\"Tried to activate aria hider too early\");\n            },\n            deactivate: function deactivate() {}\n          });\n        return t(i ? \"Enabled\" : \"Disabled\"), o(function () {\n          if (!i) return a.current.deactivate(), void (a.current = {\n            activate: function activate() {},\n            deactivate: function deactivate() {}\n          });\n          var e = n.current,\n            r = !1,\n            t = [],\n            o = [];\n          a.current = {\n            activate: function activate() {\n              if (!r) {\n                r = !0;\n                var n = e.parentNode;\n                document.querySelectorAll(\"body > *\").forEach(function (e) {\n                  if (e !== n) {\n                    var r = e.getAttribute(\"aria-hidden\");\n                    null !== r && \"false\" !== r || (t.push(r), o.push(e), e.setAttribute(\"aria-hidden\", \"true\"));\n                  }\n                });\n              }\n            },\n            deactivate: function deactivate() {\n              r && (r = !1, o.forEach(function (e, n) {\n                var r = t[n];\n                null === r ? e.removeAttribute(\"aria-hidden\") : e.setAttribute(\"aria-hidden\", r);\n              }), t = [], o = []);\n            }\n          };\n        }, [n, i]), a;\n      }({\n        targetRef: Ee,\n        enabled: se && X\n      }),\n      ze = function (e) {\n        var n = e.targetRef,\n          i = e.fallbackRef,\n          a = e.initialFocusRef,\n          c = e.enabled,\n          u = r({\n            activate: function activate() {\n              throw new TypeError(\"Tried to activate focus trap too early\");\n            },\n            deactivate: function deactivate() {}\n          });\n        return t(c ? \"Enabled\" : \"Disabled\"), o(function () {\n          if (!c) return u.current.deactivate(), void (u.current = {\n            activate: function activate() {},\n            deactivate: function deactivate() {}\n          });\n          var e = i.current,\n            r = g(n.current, {\n              onActivate: void 0,\n              initialFocus: a ? function () {\n                return (null == a ? void 0 : a.current) || e;\n              } : void 0,\n              fallbackFocus: e,\n              escapeDeactivates: !1,\n              clickOutsideDeactivates: !1\n            }),\n            t = !1;\n          u.current = {\n            activate: function activate() {\n              try {\n                return t ? Promise.resolve() : (t = !0, Promise.resolve(r.activate()).then(function () {\n                  return Promise.resolve(new Promise(function (e) {\n                    return setTimeout(function () {\n                      return e(void 0);\n                    }, 0);\n                  })).then(function () {});\n                }));\n              } catch (e) {\n                return Promise.reject(e);\n              }\n            },\n            deactivate: function deactivate() {\n              t && (t = !1, r.deactivate());\n            }\n          };\n        }, [c, i, a, n]), u;\n      }({\n        targetRef: Ee,\n        fallbackRef: Ce,\n        initialFocusRef: j || void 0,\n        enabled: se && X && !1 !== j\n      }),\n      je = function (e) {\n        var n = e.getSnapPoints,\n          i = e.heightRef,\n          c = e.lastSnapRef,\n          s = e.ready,\n          l = function (e) {\n            var n = e.contentRef,\n              i = e.controlledMaxHeight,\n              c = e.footerEnabled,\n              s = e.footerRef,\n              l = e.headerEnabled,\n              d = e.headerRef,\n              f = e.registerReady,\n              v = e.resizeSourceRef,\n              m = u(function () {\n                return f(\"contentHeight\");\n              }, [f]),\n              p = function (e, n, i) {\n                var c = u(function () {\n                    return n(\"maxHeight\");\n                  }, [n]),\n                  s = a(function () {\n                    return w(e) || \"undefined\" != typeof window ? window.innerHeight : 0;\n                  }),\n                  l = s[0],\n                  d = s[1],\n                  f = l > 0,\n                  v = r(0);\n                return t(e ? \"controlled\" : \"auto\"), o(function () {\n                  f && c();\n                }, [f, c]), O(function () {\n                  if (e) return d(w(e)), void (i.current = \"maxheightprop\");\n                  var n = function n() {\n                    v.current || (v.current = requestAnimationFrame(function () {\n                      d(window.innerHeight), i.current = \"window\", v.current = 0;\n                    }));\n                  };\n                  return window.addEventListener(\"resize\", n), d(window.innerHeight), i.current = \"window\", c(), function () {\n                    window.removeEventListener(\"resize\", n), cancelAnimationFrame(v.current);\n                  };\n                }, [e, c, i]), l;\n              }(i, f, v),\n              y = D(d, {\n                label: \"headerHeight\",\n                enabled: l,\n                resizeSourceRef: v\n              }),\n              h = D(n, {\n                label: \"contentHeight\",\n                enabled: !0,\n                resizeSourceRef: v\n              }),\n              g = D(s, {\n                label: \"footerHeight\",\n                enabled: c,\n                resizeSourceRef: v\n              }),\n              S = Math.min(p - y - g, h) + y + g;\n            t(\"minHeight: \" + S);\n            var E = h > 0;\n            return o(function () {\n              E && m();\n            }, [E, m]), {\n              maxHeight: p,\n              minHeight: S,\n              headerHeight: y,\n              footerHeight: g\n            };\n          }({\n            contentRef: e.contentRef,\n            controlledMaxHeight: e.controlledMaxHeight,\n            footerEnabled: e.footerEnabled,\n            footerRef: e.footerRef,\n            headerEnabled: e.headerEnabled,\n            headerRef: e.headerRef,\n            registerReady: e.registerReady,\n            resizeSourceRef: e.resizeSourceRef\n          }),\n          d = l.maxHeight,\n          f = l.minHeight,\n          v = l.headerHeight,\n          m = l.footerHeight,\n          p = function (e, n) {\n            var r = [].concat(e).map(w).reduce(function (e, r) {\n                return e.add(N(r, 0, n)), e;\n              }, new Set()),\n              t = Array.from(r),\n              o = Math.min.apply(Math, t);\n            if (Number.isNaN(o)) throw new TypeError(\"minSnap is NaN\");\n            var i = Math.max.apply(Math, t);\n            if (Number.isNaN(i)) throw new TypeError(\"maxSnap is NaN\");\n            return {\n              snapPoints: t,\n              minSnap: o,\n              maxSnap: i\n            };\n          }(s ? n({\n            height: i.current,\n            footerHeight: m,\n            headerHeight: v,\n            minHeight: f,\n            maxHeight: d\n          }) : [0], d),\n          y = p.snapPoints,\n          h = p.minSnap,\n          g = p.maxSnap;\n        return t(\"minSnap: \" + h + \", maxSnap:\" + g), {\n          minSnap: h,\n          maxSnap: g,\n          findSnap: function findSnap(e) {\n            var n = w(\"function\" == typeof e ? e({\n              footerHeight: m,\n              headerHeight: v,\n              height: i.current,\n              minHeight: f,\n              maxHeight: d,\n              snapPoints: y,\n              lastSnap: c.current\n            }) : e);\n            return y.reduce(function (e, r) {\n              return Math.abs(r - n) < Math.abs(e - n) ? r : e;\n            }, h);\n          },\n          maxHeight: d\n        };\n      }({\n        contentRef: be,\n        controlledMaxHeight: Z,\n        footerEnabled: !!b,\n        footerRef: xe,\n        getSnapPoints: U,\n        headerEnabled: !1 !== R,\n        headerRef: Re,\n        heightRef: Oe,\n        lastSnapRef: z,\n        ready: se,\n        registerReady: le,\n        resizeSourceRef: Ne\n      }),\n      Ae = je.minSnap,\n      Le = je.maxSnap,\n      Te = je.maxHeight,\n      Me = je.findSnap,\n      Ie = r(Te),\n      Fe = r(Ae),\n      Ge = r(Le),\n      Ze = r(Me),\n      Be = r(0);\n    O(function () {\n      Ie.current = Te, Ge.current = Le, Fe.current = Ae, Ze.current = Me, Be.current = Me(J);\n    }, [Me, J, Te, Le, Ae]);\n    var qe = c(function (e) {\n        var n = e.onRest,\n          r = e.config,\n          t = (r = void 0 === r ? {} : r).velocity,\n          o = void 0 === t ? 1 : t,\n          i = C(r, T),\n          a = C(e, M);\n        return new Promise(function (e) {\n          return Se(x({}, a, {\n            config: x({\n              velocity: o\n            }, i, {\n              mass: 1,\n              tension: F,\n              friction: Math.max(G, G + (G - G * o))\n            }),\n            onRest: function onRest() {\n              var r = [].slice.call(arguments);\n              e.apply(void 0, r), null == n || n.apply(void 0, r);\n            }\n          }));\n        });\n      }, [Se]),\n      Ve = d(A, {\n        devTools: !1,\n        actions: {\n          onOpenCancel: c(function () {\n            return null == ve.current ? void 0 : ve.current({\n              type: \"OPEN\"\n            });\n          }, []),\n          onSnapCancel: c(function (e) {\n            return null == ve.current ? void 0 : ve.current({\n              type: \"SNAP\",\n              source: e.snapSource\n            });\n          }, []),\n          onCloseCancel: c(function () {\n            return null == ve.current ? void 0 : ve.current({\n              type: \"CLOSE\"\n            });\n          }, []),\n          onResizeCancel: c(function () {\n            return null == ve.current ? void 0 : ve.current({\n              type: \"RESIZE\",\n              source: Ne.current\n            });\n          }, []),\n          onOpenEnd: c(function () {\n            return null == me.current ? void 0 : me.current({\n              type: \"OPEN\"\n            });\n          }, []),\n          onSnapEnd: c(function (e, n) {\n            return null == me.current ? void 0 : me.current({\n              type: \"SNAP\",\n              source: e.snapSource\n            });\n          }, []),\n          onResizeEnd: c(function () {\n            return null == me.current ? void 0 : me.current({\n              type: \"RESIZE\",\n              source: Ne.current\n            });\n          }, [])\n        },\n        context: {\n          initialState: k\n        },\n        services: {\n          onSnapStart: c(function (e, n) {\n            try {\n              return Promise.resolve(null == fe.current ? void 0 : fe.current({\n                type: \"SNAP\",\n                source: n.payload.source || \"custom\"\n              }));\n            } catch (e) {\n              return Promise.reject(e);\n            }\n          }, []),\n          onOpenStart: c(function () {\n            try {\n              return Promise.resolve(null == fe.current ? void 0 : fe.current({\n                type: \"OPEN\"\n              }));\n            } catch (e) {\n              return Promise.reject(e);\n            }\n          }, []),\n          onCloseStart: c(function () {\n            try {\n              return Promise.resolve(null == fe.current ? void 0 : fe.current({\n                type: \"CLOSE\"\n              }));\n            } catch (e) {\n              return Promise.reject(e);\n            }\n          }, []),\n          onResizeStart: c(function () {\n            try {\n              return Promise.resolve(null == fe.current ? void 0 : fe.current({\n                type: \"RESIZE\",\n                source: Ne.current\n              }));\n            } catch (e) {\n              return Promise.reject(e);\n            }\n          }, []),\n          onSnapEnd: c(function (e, n) {\n            try {\n              return Promise.resolve(null == me.current ? void 0 : me.current({\n                type: \"SNAP\",\n                source: e.snapSource\n              }));\n            } catch (e) {\n              return Promise.reject(e);\n            }\n          }, []),\n          onOpenEnd: c(function () {\n            try {\n              return Promise.resolve(null == me.current ? void 0 : me.current({\n                type: \"OPEN\"\n              }));\n            } catch (e) {\n              return Promise.reject(e);\n            }\n          }, []),\n          onCloseEnd: c(function () {\n            try {\n              return Promise.resolve(null == me.current ? void 0 : me.current({\n                type: \"CLOSE\"\n              }));\n            } catch (e) {\n              return Promise.reject(e);\n            }\n          }, []),\n          onResizeEnd: c(function () {\n            try {\n              return Promise.resolve(null == me.current ? void 0 : me.current({\n                type: \"RESIZE\",\n                source: Ne.current\n              }));\n            } catch (e) {\n              return Promise.reject(e);\n            }\n          }, []),\n          renderVisuallyHidden: c(function (e, n) {\n            try {\n              return Promise.resolve(qe({\n                y: Be.current,\n                ready: 0,\n                maxHeight: Ie.current,\n                maxSnap: Ge.current,\n                minSnap: Be.current,\n                immediate: !0\n              })).then(function () {});\n            } catch (e) {\n              return Promise.reject(e);\n            }\n          }, [qe]),\n          activate: c(function (e, n) {\n            try {\n              return de.current = !0, Promise.resolve(Promise.all([De.current.activate(), ze.current.activate(), ke.current.activate()])).then(function () {});\n            } catch (e) {\n              return Promise.reject(e);\n            }\n          }, [ke, ze, De]),\n          deactivate: c(function () {\n            try {\n              return De.current.deactivate(), ze.current.deactivate(), ke.current.deactivate(), de.current = !1, Promise.resolve();\n            } catch (e) {\n              return Promise.reject(e);\n            }\n          }, [ke, ze, De]),\n          openImmediately: c(function () {\n            try {\n              return Oe.current = Be.current, Promise.resolve(qe({\n                y: Be.current,\n                ready: 1,\n                maxHeight: Ie.current,\n                maxSnap: Ge.current,\n                minSnap: Be.current,\n                immediate: !0\n              })).then(function () {});\n            } catch (e) {\n              return Promise.reject(e);\n            }\n          }, [qe]),\n          openSmoothly: c(function () {\n            try {\n              return Promise.resolve(qe({\n                y: 0,\n                ready: 1,\n                maxHeight: Ie.current,\n                maxSnap: Ge.current,\n                minSnap: Be.current,\n                immediate: !0\n              })).then(function () {\n                return Oe.current = Be.current, Promise.resolve(qe({\n                  y: Be.current,\n                  ready: 1,\n                  maxHeight: Ie.current,\n                  maxSnap: Ge.current,\n                  minSnap: Be.current,\n                  immediate: He.current\n                })).then(function () {});\n              });\n            } catch (e) {\n              return Promise.reject(e);\n            }\n          }, [qe, He]),\n          snapSmoothly: c(function (e, n) {\n            try {\n              var r = Ze.current(e.y);\n              return Oe.current = r, z.current = r, Promise.resolve(qe({\n                y: r,\n                ready: 1,\n                maxHeight: Ie.current,\n                maxSnap: Ge.current,\n                minSnap: Fe.current,\n                immediate: He.current,\n                config: {\n                  velocity: e.velocity\n                }\n              })).then(function () {});\n            } catch (e) {\n              return Promise.reject(e);\n            }\n          }, [qe, z, He]),\n          resizeSmoothly: c(function () {\n            try {\n              var e = Ze.current(Oe.current);\n              return Oe.current = e, z.current = e, Promise.resolve(qe({\n                y: e,\n                ready: 1,\n                maxHeight: Ie.current,\n                maxSnap: Ge.current,\n                minSnap: Fe.current,\n                immediate: \"element\" !== Ne.current || He.current\n              })).then(function () {});\n            } catch (e) {\n              return Promise.reject(e);\n            }\n          }, [qe, z, He]),\n          closeSmoothly: c(function (e, n) {\n            try {\n              return qe({\n                minSnap: Oe.current,\n                immediate: !0\n              }), Oe.current = 0, Promise.resolve(qe({\n                y: 0,\n                maxHeight: Ie.current,\n                maxSnap: Ge.current,\n                immediate: He.current\n              })).then(function () {\n                return Promise.resolve(qe({\n                  ready: 0,\n                  immediate: !0\n                })).then(function () {});\n              });\n            } catch (e) {\n              return Promise.reject(e);\n            }\n          }, [qe, He])\n        }\n      }),\n      Ke = Ve[0],\n      Je = Ve[1];\n    o(function () {\n      se && Je(H ? \"OPEN\" : \"CLOSE\");\n    }, [H, Je, se]), O(function () {\n      (Te || Le || Ae) && Je(\"RESIZE\");\n    }, [Te, Le, Ae, Je]), o(function () {\n      return function () {\n        De.current.deactivate(), ze.current.deactivate(), ke.current.deactivate();\n      };\n    }, [ke, ze, De]), s(i, function () {\n      return {\n        snapTo: function snapTo(e, n) {\n          var r = void 0 === n ? {} : n,\n            t = r.velocity,\n            o = void 0 === t ? 1 : t,\n            i = r.source,\n            a = void 0 === i ? \"custom\" : i;\n          Je(\"SNAP\", {\n            payload: {\n              y: Ze.current(e),\n              velocity: o,\n              source: a\n            }\n          });\n        },\n        get height() {\n          return Oe.current;\n        }\n      };\n    }, [Je]), o(function () {\n      var e = Pe.current,\n        n = function n(e) {\n          we.current && e.preventDefault();\n        },\n        r = function r(n) {\n          e.scrollTop < 0 && (requestAnimationFrame(function () {\n            e.style.overflow = \"hidden\", e.scrollTop = 0, e.style.removeProperty(\"overflow\");\n          }), n.preventDefault());\n        };\n      return ae && (e.addEventListener(\"scroll\", n), e.addEventListener(\"touchmove\", n), e.addEventListener(\"touchstart\", r)), function () {\n        e.removeEventListener(\"scroll\", n), e.removeEventListener(\"touchmove\", n), e.removeEventListener(\"touchstart\", r);\n      };\n    }, [ae, Pe]);\n    var Qe = y(function (e) {\n      var n = e.args,\n        r = (n = void 0 === n ? [] : n)[0],\n        t = (r = void 0 === r ? {} : r).closeOnTap,\n        o = void 0 !== t && t,\n        i = r.isContentDragging,\n        a = void 0 !== i && i,\n        c = e.cancel,\n        u = e.direction[1],\n        s = e.down,\n        l = e.first,\n        d = e.last,\n        f = e.memo,\n        v = void 0 === f ? ge.y.getValue() : f,\n        m = e.tap,\n        p = e.velocity,\n        y = -1 * e.movement[1];\n      if (!de.current) return c(), v;\n      if (I && o && m) return c(), setTimeout(function () {\n        return I();\n      }, 0), v;\n      if (m) return v;\n      var g = v + y,\n        S = y * p,\n        E = Math.max(Fe.current, Math.min(Ge.current, g + 2 * S));\n      if (!s && I && u > 0 && g + S < Fe.current / 2) return c(), I(), v;\n      var P = s ? I || Fe.current !== Ge.current ? h(g, I ? 0 : Fe.current, Ge.current, .55) : g < Fe.current ? h(g, Fe.current, 2 * Ge.current, .55) : h(g, Fe.current / 2, Ge.current, .55) : E;\n      return ae && a ? (P >= Ge.current && (P = Ge.current), v === Ge.current && Pe.current.scrollTop > 0 && (P = Ge.current), we.current = P < Ge.current) : we.current = !1, l && Je(\"DRAG\"), d ? (Je(\"SNAP\", {\n        payload: {\n          y: P,\n          velocity: p > .05 ? p : 1,\n          source: \"dragging\"\n        }\n      }), v) : (Se({\n        y: P,\n        ready: 1,\n        maxHeight: Ie.current,\n        maxSnap: Ge.current,\n        minSnap: Fe.current,\n        immediate: !0,\n        config: {\n          velocity: p\n        }\n      }), v);\n    }, {\n      filterTaps: !0\n    });\n    if (Number.isNaN(Ge.current)) throw new TypeError(\"maxSnapRef is NaN!!\");\n    if (Number.isNaN(Fe.current)) throw new TypeError(\"minSnapRef is NaN!!\");\n    var Ue = function (e) {\n      var n,\n        r = e.spring,\n        t = v([r.y, r.maxHeight], function (e, n) {\n          return Math.round(N(n - e, 0, 16)) + \"px\";\n        }),\n        o = v([r.y, r.minSnap, r.maxSnap], function (e, n, r) {\n          return N(e, n, r) + \"px\";\n        }),\n        i = v([r.y, r.minSnap, r.maxSnap], function (e, n, r) {\n          return e < n ? n - e + \"px\" : e > r ? r - e + \"px\" : \"0px\";\n        }),\n        a = v([r.y, r.maxSnap], function (e, n) {\n          return e >= n ? Math.ceil(e - n) : 0;\n        }),\n        c = v([r.y, r.minSnap], function (e, n) {\n          if (!n) return 0;\n          var r = Math.max(n / 2 - 45, 0);\n          return N((e - r) * (1 / (Math.min(n / 2 + 45, n) - r) + 0), 0, 1);\n        }),\n        u = v([r.y, r.minSnap], function (e, n) {\n          return n ? N(e / n, 0, 1) : 0;\n        });\n      return (n = {})[\"--rsbs-content-opacity\"] = c, n[\"--rsbs-backdrop-opacity\"] = u, n[\"--rsbs-antigap-scale-y\"] = a, n[\"--rsbs-overlay-translate-y\"] = i, n[\"--rsbs-overlay-rounded\"] = t, n[\"--rsbs-overlay-h\"] = o, n;\n    }({\n      spring: ge\n    }); /*#__PURE__*/\n    return n.createElement(m.div, x({}, ce, {\n      \"data-rsbs-root\": !0,\n      \"data-rsbs-state\": B.find(Ke.matches),\n      \"data-rsbs-is-blocking\": X,\n      \"data-rsbs-is-dismissable\": !!I,\n      \"data-rsbs-has-header\": !!R,\n      \"data-rsbs-has-footer\": !!b,\n      className: P,\n      ref: Ee,\n      style: x({}, Ue, _, {\n        opacity: ge.ready\n      })\n    }), p, X && /*#__PURE__*/n.createElement(\"div\", x({\n      key: \"backdrop\",\n      \"data-rsbs-backdrop\": !0\n    }, Qe({\n      closeOnTap: !0\n    }))), /*#__PURE__*/n.createElement(\"div\", {\n      key: \"overlay\",\n      \"aria-modal\": \"true\",\n      role: \"dialog\",\n      \"data-rsbs-overlay\": !0,\n      tabIndex: -1,\n      ref: Ce,\n      onKeyDown: function onKeyDown(e) {\n        \"Escape\" === e.key && (e.stopPropagation(), I && I());\n      }\n    }, !1 !== R && /*#__PURE__*/n.createElement(\"div\", x({\n      key: \"header\",\n      \"data-rsbs-header\": !0,\n      ref: Re\n    }, Qe()), R), /*#__PURE__*/n.createElement(\"div\", x({\n      key: \"scroll\",\n      \"data-rsbs-scroll\": !0,\n      ref: Pe\n    }, ae ? Qe({\n      isContentDragging: !0\n    }) : {}), /*#__PURE__*/n.createElement(\"div\", {\n      \"data-rsbs-content\": !0,\n      ref: be\n    }, l)), b && /*#__PURE__*/n.createElement(\"div\", x({\n      key: \"footer\",\n      ref: xe,\n      \"data-rsbs-footer\": !0\n    }, Qe()), b)));\n  }),\n  B = [\"closed\", \"opening\", \"open\", \"closing\", \"dragging\", \"snapping\", \"resizing\"];\nfunction q(e) {\n  var n = e.lastSnap;\n  return null != n ? n : Math.min.apply(Math, e.snapPoints);\n}\nfunction V(e) {\n  return e.minHeight;\n}\nvar K = [\"onSpringStart\", \"onSpringEnd\", \"skipInitialTransition\"],\n  J = l(function (t, o) {\n    var i = t.onSpringStart,\n      u = t.onSpringEnd,\n      s = t.skipInitialTransition,\n      l = C(t, K),\n      d = a(!1),\n      f = d[0],\n      v = d[1],\n      m = r(),\n      p = r(null),\n      y = r(s && l.open ? \"OPEN\" : \"CLOSED\");\n    O(function () {\n      if (l.open) return cancelAnimationFrame(m.current), v(!0), function () {\n        y.current = \"CLOSED\";\n      };\n    }, [l.open]);\n    var h = c(function (e) {\n        return Promise.resolve(null == i ? void 0 : i(e)).then(function () {\n          \"OPEN\" === e.type && cancelAnimationFrame(m.current);\n        });\n      }, [i]),\n      g = c(function (e) {\n        return Promise.resolve(null == u ? void 0 : u(e)).then(function () {\n          \"CLOSE\" === e.type && (m.current = requestAnimationFrame(function () {\n            return v(!1);\n          }));\n        });\n      }, [u]);\n    return f ? /*#__PURE__*/n.createElement(e, {\n      \"data-rsbs-portal\": !0\n    }, /*#__PURE__*/n.createElement(Z, x({}, l, {\n      lastSnapRef: p,\n      ref: o,\n      initialState: y.current,\n      onSpringStart: h,\n      onSpringEnd: g\n    }))) : null;\n  });\nexport { J as BottomSheet };","map":{"version":3,"names":["O","window","i","o","N","e","n","r","w","Math","round","Number","isNaN","TypeError","H","box","D","label","enabled","resizeSourceRef","u","a","s","l","t","d","c","borderBoxSize","blockSize","current","P","observe","disconnect","k","Promise","setTimeout","z","DRAG","target","actions","j","RESIZE","A","b","id","initial","context","initialState","states","closed","on","OPEN","CLOSE","opening","start","invoke","src","onDone","transition","always","cond","immediately","open","activating","x","smoothly","visuallyHidden","end","done","type","SNAP","dragging","snapping","entry","R","y","payload","velocity","snapSource","source","snappingSmoothly","resizing","resizingSmoothly","closing","deactivating","closingSmoothly","onOpenCancel","onSnapCancel","onResizeCancel","onCloseCancel","onOpenEnd","onSnapEnd","onRezizeEnd","services","onSnapStart","resolve","then","reject","onOpenStart","onCloseStart","onResizeStart","onCloseEnd","onResizeEnd","renderVisuallyHidden","activate","deactivate","openSmoothly","openImmediately","snapSmoothly","resizeSmoothly","closeSmoothly","guards","initiallyClosed","initiallyOpen","L","T","M","I","p","default","F","tension","G","friction","Z","forwardRef","children","sibling","className","footer","header","lastSnapRef","initialFocusRef","onDismiss","maxHeight","K","defaultSnap","J","q","Q","snapPoints","U","V","W","blocking","X","Y","scrollLocking","$","_","style","ee","onSpringStart","ne","onSpringCancel","re","onSpringEnd","te","reserveScrollBarGap","oe","ie","expandOnContentDrag","ae","ce","C","ue","Object","values","length","every","Boolean","ready","registerReady","se","le","de","fe","ve","me","pe","ye","he","f","minSnap","maxSnap","ge","Se","Ee","Pe","be","Re","xe","Ce","Oe","Ne","we","He","matchMedia","matches","addListener","removeListener","De","targetRef","S","allowTouchMove","closest","E","ke","parentNode","document","querySelectorAll","forEach","getAttribute","push","setAttribute","removeAttribute","ze","fallbackRef","g","onActivate","initialFocus","fallbackFocus","escapeDeactivates","clickOutsideDeactivates","je","getSnapPoints","heightRef","contentRef","controlledMaxHeight","footerEnabled","footerRef","headerEnabled","headerRef","v","m","innerHeight","requestAnimationFrame","addEventListener","removeEventListener","cancelAnimationFrame","h","min","minHeight","headerHeight","footerHeight","concat","map","reduce","add","Set","Array","from","apply","max","height","findSnap","lastSnap","abs","Ae","Le","Te","Me","Ie","Fe","Ge","Ze","Be","qe","onRest","config","mass","slice","call","arguments","Ve","devTools","immediate","all","Ke","Je","snapTo","preventDefault","scrollTop","overflow","removeProperty","Qe","args","closeOnTap","isContentDragging","cancel","direction","down","first","last","memo","getValue","tap","movement","filterTaps","Ue","spring","ceil","createElement","div","B","find","ref","opacity","key","role","tabIndex","onKeyDown","stopPropagation","skipInitialTransition","BottomSheet"],"sources":["B:\\dev\\3DModelViewer\\frontend\\node_modules\\react-spring-bottom-sheet\\src\\hooks\\useLayoutEffect.tsx","B:\\dev\\3DModelViewer\\frontend\\node_modules\\react-spring-bottom-sheet\\src\\utils.ts","B:\\dev\\3DModelViewer\\frontend\\node_modules\\react-spring-bottom-sheet\\src\\hooks\\useSnapPoints.tsx","B:\\dev\\3DModelViewer\\frontend\\node_modules\\react-spring-bottom-sheet\\src\\machines\\overlay.ts","B:\\dev\\3DModelViewer\\frontend\\node_modules\\react-spring-bottom-sheet\\src\\BottomSheet.tsx","B:\\dev\\3DModelViewer\\frontend\\node_modules\\react-spring-bottom-sheet\\src\\hooks\\useReady.tsx","B:\\dev\\3DModelViewer\\frontend\\node_modules\\react-spring-bottom-sheet\\src\\hooks\\useReducedMotion.tsx","B:\\dev\\3DModelViewer\\frontend\\node_modules\\react-spring-bottom-sheet\\src\\hooks\\useSpring.tsx","B:\\dev\\3DModelViewer\\frontend\\node_modules\\react-spring-bottom-sheet\\src\\hooks\\useScrollLock.tsx","B:\\dev\\3DModelViewer\\frontend\\node_modules\\react-spring-bottom-sheet\\src\\hooks\\useAriaHider.tsx","B:\\dev\\3DModelViewer\\frontend\\node_modules\\react-spring-bottom-sheet\\src\\hooks\\useFocusTrap.tsx","B:\\dev\\3DModelViewer\\frontend\\node_modules\\react-spring-bottom-sheet\\src\\hooks\\useSpringInterpolations.tsx","B:\\dev\\3DModelViewer\\frontend\\node_modules\\react-spring-bottom-sheet\\src\\index.tsx"],"sourcesContent":["import { useEffect, useLayoutEffect as useLayoutEffectSafely } from 'react'\n\n// Ensure the name used in components is useLayoutEffect so the eslint react hooks plugin works\nexport const useLayoutEffect =\n  typeof window !== 'undefined' ? useLayoutEffectSafely : useEffect\n","/* eslint-disable no-self-compare */\n\n// stolen from lodash\nexport function clamp(number: number, lower: number, upper: number) {\n  number = +number\n  lower = +lower\n  upper = +upper\n  lower = lower === lower ? lower : 0\n  upper = upper === upper ? upper : 0\n  if (number === number) {\n    number = number <= upper ? number : upper\n    number = number >= lower ? number : lower\n  }\n  return number\n}\n\n// Mwahaha easiest way to filter out NaN I ever saw! >:3\nexport function deleteNaN(arr) {\n  const set = new Set(arr)\n  set.delete(NaN)\n  return [...set]\n}\n\nexport function roundAndCheckForNaN(unrounded) {\n  const rounded = Math.round(unrounded)\n  if (Number.isNaN(unrounded)) {\n    throw new TypeError(\n      'Found a NaN! Check your snapPoints / defaultSnap / snapTo '\n    )\n  }\n\n  return rounded\n}\n\n// Validate, sanitize, round and dedupe snap points, as well as extracting the minSnap and maxSnap points\nexport function processSnapPoints(unsafeSnaps: number | number[], maxHeight) {\n  const safeSnaps = [].concat(unsafeSnaps).map(roundAndCheckForNaN)\n\n  const snapPointsDedupedSet = safeSnaps.reduce((acc, snapPoint) => {\n    acc.add(clamp(snapPoint, 0, maxHeight))\n    return acc\n  }, new Set<number>())\n\n  const snapPoints = Array.from(snapPointsDedupedSet)\n\n  const minSnap = Math.min(...snapPoints)\n  if (Number.isNaN(minSnap)) {\n    throw new TypeError('minSnap is NaN')\n  }\n  const maxSnap = Math.max(...snapPoints)\n  if (Number.isNaN(maxSnap)) {\n    throw new TypeError('maxSnap is NaN')\n  }\n\n  return {\n    snapPoints,\n    minSnap,\n    maxSnap,\n  }\n}\n\nexport const debugging =\n  process.env.NODE_ENV === 'development' && typeof window !== 'undefined'\n    ? window.location.search === '?debug'\n    : false\n","import React, {\n  useCallback,\n  useDebugValue,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react'\nimport { ResizeObserver, ResizeObserverEntry } from '@juggle/resize-observer'\nimport type { defaultSnapProps, ResizeSource, snapPoints } from '../types'\nimport { processSnapPoints, roundAndCheckForNaN } from '../utils'\nimport { useReady } from './useReady'\nimport { ResizeObserverOptions } from '@juggle/resize-observer/lib/ResizeObserverOptions'\nimport { useLayoutEffect } from './useLayoutEffect'\n\nexport function useSnapPoints({\n  contentRef,\n  controlledMaxHeight,\n  footerEnabled,\n  footerRef,\n  getSnapPoints,\n  headerEnabled,\n  headerRef,\n  heightRef,\n  lastSnapRef,\n  ready,\n  registerReady,\n  resizeSourceRef,\n}: {\n  contentRef: React.RefObject<Element>\n  controlledMaxHeight?: number\n  footerEnabled: boolean\n  footerRef: React.RefObject<Element>\n  getSnapPoints: snapPoints\n  headerEnabled: boolean\n  headerRef: React.RefObject<Element>\n  heightRef: React.RefObject<number>\n  lastSnapRef: React.RefObject<number>\n  ready: boolean\n  registerReady: ReturnType<typeof useReady>['registerReady']\n  resizeSourceRef: React.MutableRefObject<ResizeSource>\n}) {\n  const { maxHeight, minHeight, headerHeight, footerHeight } = useDimensions({\n    contentRef: contentRef,\n    controlledMaxHeight,\n    footerEnabled,\n    footerRef,\n    headerEnabled,\n    headerRef,\n    registerReady,\n    resizeSourceRef,\n  })\n\n  const { snapPoints, minSnap, maxSnap } = processSnapPoints(\n    ready\n      ? getSnapPoints({\n          height: heightRef.current,\n          footerHeight,\n          headerHeight,\n          minHeight,\n          maxHeight,\n        })\n      : [0],\n    maxHeight\n  )\n  //console.log({ snapPoints, minSnap, maxSnap })\n\n  // @TODO investigate the gains from memoizing this\n  function findSnap(\n    numberOrCallback: number | ((state: defaultSnapProps) => number)\n  ) {\n    let unsafeSearch: number\n    if (typeof numberOrCallback === 'function') {\n      unsafeSearch = numberOrCallback({\n        footerHeight,\n        headerHeight,\n        height: heightRef.current,\n        minHeight,\n        maxHeight,\n        snapPoints,\n        lastSnap: lastSnapRef.current,\n      })\n    } else {\n      unsafeSearch = numberOrCallback\n    }\n    const querySnap = roundAndCheckForNaN(unsafeSearch)\n    return snapPoints.reduce(\n      (prev, curr) =>\n        Math.abs(curr - querySnap) < Math.abs(prev - querySnap) ? curr : prev,\n      minSnap\n    )\n  }\n\n  useDebugValue(`minSnap: ${minSnap}, maxSnap:${maxSnap}`)\n\n  return { minSnap, maxSnap, findSnap, maxHeight }\n}\n\nfunction useDimensions({\n  contentRef,\n  controlledMaxHeight,\n  footerEnabled,\n  footerRef,\n  headerEnabled,\n  headerRef,\n  registerReady,\n  resizeSourceRef,\n}: {\n  contentRef: React.RefObject<Element>\n  controlledMaxHeight?: number\n  footerEnabled: boolean\n  footerRef: React.RefObject<Element>\n  headerEnabled: boolean\n  headerRef: React.RefObject<Element>\n  registerReady: ReturnType<typeof useReady>['registerReady']\n  resizeSourceRef: React.MutableRefObject<ResizeSource>\n}) {\n  const setReady = useMemo(() => registerReady('contentHeight'), [\n    registerReady,\n  ])\n  const maxHeight = useMaxHeight(\n    controlledMaxHeight,\n    registerReady,\n    resizeSourceRef\n  )\n\n  // @TODO probably better to forward props instead of checking refs to decide if it's enabled\n  const headerHeight = useElementSizeObserver(headerRef, {\n    label: 'headerHeight',\n    enabled: headerEnabled,\n    resizeSourceRef,\n  })\n  const contentHeight = useElementSizeObserver(contentRef, {\n    label: 'contentHeight',\n    enabled: true,\n    resizeSourceRef,\n  })\n  const footerHeight = useElementSizeObserver(footerRef, {\n    label: 'footerHeight',\n    enabled: footerEnabled,\n    resizeSourceRef,\n  })\n  const minHeight =\n    Math.min(maxHeight - headerHeight - footerHeight, contentHeight) +\n    headerHeight +\n    footerHeight\n\n  useDebugValue(`minHeight: ${minHeight}`)\n\n  const ready = contentHeight > 0\n  useEffect(() => {\n    if (ready) {\n      setReady()\n    }\n  }, [ready, setReady])\n\n  return {\n    maxHeight,\n    minHeight,\n    headerHeight,\n    footerHeight,\n  }\n}\n\nconst observerOptions: ResizeObserverOptions = {\n  // Respond to changes to padding, happens often on iOS when using env(safe-area-inset-bottom)\n  // And the user hides or shows the Safari browser toolbar\n  box: 'border-box',\n}\n/**\n * Hook for determining the size of an element using the Resize Observer API.\n *\n * @param ref - A React ref to an element\n */\nfunction useElementSizeObserver(\n  ref: React.RefObject<Element>,\n  {\n    label,\n    enabled,\n    resizeSourceRef,\n  }: {\n    label: string\n    enabled: boolean\n    resizeSourceRef: React.MutableRefObject<ResizeSource>\n  }\n): number {\n  let [size, setSize] = useState(0)\n\n  useDebugValue(`${label}: ${size}`)\n\n  const handleResize = useCallback(\n    (entries: ResizeObserverEntry[]) => {\n      // we only observe one element, so accessing the first entry here is fine\n      setSize(entries[0].borderBoxSize[0].blockSize)\n      resizeSourceRef.current = 'element'\n    },\n    [resizeSourceRef]\n  )\n\n  useLayoutEffect(() => {\n    if (!ref.current || !enabled) {\n      return\n    }\n\n    const resizeObserver = new ResizeObserver(handleResize)\n    resizeObserver.observe(ref.current, observerOptions)\n\n    return () => {\n      resizeObserver.disconnect()\n    }\n  }, [ref, handleResize, enabled])\n\n  return enabled ? size : 0\n}\n\n// Blazingly keep track of the current viewport height without blocking the thread, keeping that sweet 60fps on smartphones\nfunction useMaxHeight(\n  controlledMaxHeight,\n  registerReady: ReturnType<typeof useReady>['registerReady'],\n  resizeSourceRef: React.MutableRefObject<ResizeSource>\n) {\n  const setReady = useMemo(() => registerReady('maxHeight'), [registerReady])\n  const [maxHeight, setMaxHeight] = useState(() =>\n    roundAndCheckForNaN(controlledMaxHeight) || typeof window !== 'undefined'\n      ? window.innerHeight\n      : 0\n  )\n  const ready = maxHeight > 0\n  const raf = useRef(0)\n\n  useDebugValue(controlledMaxHeight ? 'controlled' : 'auto')\n\n  useEffect(() => {\n    if (ready) {\n      setReady()\n    }\n  }, [ready, setReady])\n\n  useLayoutEffect(() => {\n    // Bail if the max height is a controlled prop\n    if (controlledMaxHeight) {\n      setMaxHeight(roundAndCheckForNaN(controlledMaxHeight))\n      resizeSourceRef.current = 'maxheightprop'\n\n      return\n    }\n\n    const handleResize = () => {\n      if (raf.current) {\n        // bail to throttle the amount of resize changes\n        return\n      }\n\n      // throttle state changes using rAF\n      raf.current = requestAnimationFrame(() => {\n        setMaxHeight(window.innerHeight)\n        resizeSourceRef.current = 'window'\n\n        raf.current = 0\n      })\n    }\n    window.addEventListener('resize', handleResize)\n    setMaxHeight(window.innerHeight)\n    resizeSourceRef.current = 'window'\n    setReady()\n\n    return () => {\n      window.removeEventListener('resize', handleResize)\n      cancelAnimationFrame(raf.current)\n    }\n  }, [controlledMaxHeight, setReady, resizeSourceRef])\n\n  return maxHeight\n}\n","import { Machine, assign } from 'xstate'\n\n// This is the root machine, composing all the other machines and is the brain of the bottom sheet\n\ninterface OverlayStateSchema {\n  states: {\n    // the overlay usually starts in the closed position\n    closed: {}\n    opening: {\n      states: {\n        // Used to fire off the springStart event\n        start: {}\n        // Decide how to transition to the open state based on what the initialState is\n        transition: {}\n        // Fast enter animation, sheet is open by default\n        immediately: {\n          states: {\n            open: {}\n            activating: {}\n          }\n        }\n        smoothly: {\n          states: {\n            // This state only happens when the overlay should start in an open state, instead of animating from the bottom\n            // openImmediately: {}\n            // visuallyHidden will render the overlay in the open state, but with opacity 0\n            // doing this solves two problems:\n            // on Android focusing an input element will trigger the softkeyboard to show up, which will change the viewport height\n            // on iOS the focus event will break the view by triggering a scrollIntoView event if focus happens while the overlay is below the viewport and body got overflow:hidden\n            // by rendering things with opacity 0 we ensure keyboards and scrollIntoView all happen in a way that match up with what the sheet will look like.\n            // we can then move it to the opening position below the viewport, and animate it into view without worrying about height changes or scrolling overflow:hidden events\n            visuallyHidden: {}\n            // In this state we're activating focus traps, scroll locks and more, this will sometimes trigger soft keyboards and scrollIntoView\n            // @TODO we might want to add a delay here before proceeding to open, to give android and iOS enough time to adjust the viewport when focusing an interactive element\n            activating: {}\n            // Animates from the bottom\n            open: {}\n          }\n        }\n        // Used to fire off the springEnd event\n        end: {}\n        // And finally we're ready to transition to open\n        done: {}\n      }\n    }\n    open: {}\n    // dragging responds to user gestures, which may interrupt the opening state, closing state or snapping\n    // when interrupting an opening event, it fires onSpringEnd(OPEN) before onSpringStart(DRAG)\n    // when interrupting a closing event, it fires onSpringCancel(CLOSE) before onSpringStart(DRAG)\n    // when interrupting a dragging event, it fires onSpringCancel(SNAP) before onSpringStart(DRAG)\n    dragging: {}\n    // snapping happens whenever transitioning to a new snap point, often after dragging\n    snapping: {\n      states: {\n        start: {}\n        snappingSmoothly: {}\n        end: {}\n        done: {}\n      }\n    }\n    resizing: {\n      states: {\n        start: {}\n        resizingSmoothly: {}\n        end: {}\n        done: {}\n      }\n    }\n    closing: {\n      states: {\n        start: {}\n        deactivating: {}\n        closingSmoothly: {}\n        end: {}\n        done: {}\n      }\n    }\n  }\n}\n\ntype OverlayEvent =\n  | { type: 'OPEN' }\n  | {\n      type: 'SNAP'\n      payload: {\n        y: number\n        velocity: number\n        source: 'dragging' | 'custom' | string\n      }\n    }\n  | { type: 'CLOSE' }\n  | { type: 'DRAG' }\n  | { type: 'RESIZE' }\n\n// The context (extended state) of the machine\ninterface OverlayContext {\n  initialState: 'OPEN' | 'CLOSED'\n}\nfunction sleep(ms = 1000) {\n  return new Promise((resolve) => setTimeout(resolve, ms))\n}\n\nconst cancelOpen = {\n  CLOSE: { target: '#overlay.closing', actions: 'onOpenCancel' },\n}\nconst openToDrag = {\n  DRAG: { target: '#overlay.dragging', actions: 'onOpenEnd' },\n}\nconst openToResize = {\n  RESIZE: { target: '#overlay.resizing', actions: 'onOpenEnd' },\n}\n\nconst initiallyOpen = ({ initialState }) => initialState === 'OPEN'\nconst initiallyClosed = ({ initialState }) => initialState === 'CLOSED'\n\n// Copy paste the machine into https://xstate.js.org/viz/ to make sense of what's going on in here ;)\n\nexport const overlayMachine = Machine<\n  OverlayContext,\n  OverlayStateSchema,\n  OverlayEvent\n>(\n  {\n    id: 'overlay',\n    initial: 'closed',\n    context: { initialState: 'CLOSED' },\n    states: {\n      closed: { on: { OPEN: 'opening', CLOSE: undefined } },\n      opening: {\n        initial: 'start',\n        states: {\n          start: {\n            invoke: {\n              src: 'onOpenStart',\n              onDone: 'transition',\n            },\n          },\n          transition: {\n            always: [\n              { target: 'immediately', cond: 'initiallyOpen' },\n              { target: 'smoothly', cond: 'initiallyClosed' },\n            ],\n          },\n          immediately: {\n            initial: 'open',\n            states: {\n              open: {\n                invoke: { src: 'openImmediately', onDone: 'activating' },\n              },\n              activating: {\n                invoke: { src: 'activate', onDone: '#overlay.opening.end' },\n                on: { ...openToDrag, ...openToResize },\n              },\n            },\n          },\n          smoothly: {\n            initial: 'visuallyHidden',\n            states: {\n              visuallyHidden: {\n                invoke: { src: 'renderVisuallyHidden', onDone: 'activating' },\n              },\n              activating: {\n                invoke: { src: 'activate', onDone: 'open' },\n              },\n              open: {\n                invoke: { src: 'openSmoothly', onDone: '#overlay.opening.end' },\n                on: { ...openToDrag, ...openToResize },\n              },\n            },\n          },\n          end: {\n            invoke: { src: 'onOpenEnd', onDone: 'done' },\n            on: { CLOSE: '#overlay.closing', DRAG: '#overlay.dragging' },\n          },\n          done: {\n            type: 'final',\n          },\n        },\n        on: { ...cancelOpen },\n        onDone: 'open',\n      },\n      open: {\n        on: { DRAG: '#overlay.dragging', SNAP: 'snapping', RESIZE: 'resizing' },\n      },\n      dragging: {\n        on: { SNAP: 'snapping' },\n      },\n      snapping: {\n        initial: 'start',\n        states: {\n          start: {\n            invoke: {\n              src: 'onSnapStart',\n              onDone: 'snappingSmoothly',\n            },\n            entry: [\n              assign({\n                // @ts-expect-error\n                y: (_, { payload: { y } }) => y,\n                velocity: (_, { payload: { velocity } }) => velocity,\n                snapSource: (_, { payload: { source = 'custom' } }) => source,\n              }),\n            ],\n          },\n          snappingSmoothly: {\n            invoke: { src: 'snapSmoothly', onDone: 'end' },\n          },\n          end: {\n            invoke: { src: 'onSnapEnd', onDone: 'done' },\n            on: {\n              RESIZE: '#overlay.resizing',\n              SNAP: '#overlay.snapping',\n              CLOSE: '#overlay.closing',\n              DRAG: '#overlay.dragging',\n            },\n          },\n          done: { type: 'final' },\n        },\n        on: {\n          SNAP: { target: 'snapping', actions: 'onSnapEnd' },\n          RESIZE: { target: '#overlay.resizing', actions: 'onSnapCancel' },\n          DRAG: { target: '#overlay.dragging', actions: 'onSnapCancel' },\n          CLOSE: { target: '#overlay.closing', actions: 'onSnapCancel' },\n        },\n        onDone: 'open',\n      },\n      resizing: {\n        initial: 'start',\n        states: {\n          start: {\n            invoke: {\n              src: 'onResizeStart',\n              onDone: 'resizingSmoothly',\n            },\n          },\n          resizingSmoothly: {\n            invoke: { src: 'resizeSmoothly', onDone: 'end' },\n          },\n          end: {\n            invoke: { src: 'onResizeEnd', onDone: 'done' },\n            on: {\n              SNAP: '#overlay.snapping',\n              CLOSE: '#overlay.closing',\n              DRAG: '#overlay.dragging',\n            },\n          },\n          done: { type: 'final' },\n        },\n        on: {\n          RESIZE: { target: 'resizing', actions: 'onResizeEnd' },\n          SNAP: { target: 'snapping', actions: 'onResizeCancel' },\n          DRAG: { target: '#overlay.dragging', actions: 'onResizeCancel' },\n          CLOSE: { target: '#overlay.closing', actions: 'onResizeCancel' },\n        },\n        onDone: 'open',\n      },\n      closing: {\n        initial: 'start',\n        states: {\n          start: {\n            invoke: {\n              src: 'onCloseStart',\n              onDone: 'deactivating',\n            },\n            on: { OPEN: { target: '#overlay.open', actions: 'onCloseCancel' } },\n          },\n          deactivating: {\n            invoke: { src: 'deactivate', onDone: 'closingSmoothly' },\n          },\n          closingSmoothly: {\n            invoke: { src: 'closeSmoothly', onDone: 'end' },\n          },\n          end: {\n            invoke: { src: 'onCloseEnd', onDone: 'done' },\n            on: {\n              OPEN: { target: '#overlay.opening', actions: 'onCloseCancel' },\n            },\n          },\n          done: { type: 'final' },\n        },\n        on: {\n          CLOSE: undefined,\n          OPEN: { target: '#overlay.opening', actions: 'onCloseCancel' },\n        },\n        onDone: 'closed',\n      },\n    },\n    on: {\n      CLOSE: 'closing',\n    },\n  },\n  {\n    actions: {\n      onOpenCancel: (context, event) => {\n        console.log('onOpenCancel', { context, event })\n      },\n      onSnapCancel: (context, event) => {\n        console.log('onSnapCancel', { context, event })\n      },\n      onResizeCancel: (context, event) => {\n        console.log('onResizeCancel', { context, event })\n      },\n      onCloseCancel: (context, event) => {\n        console.log('onCloseCancel', { context, event })\n      },\n      onOpenEnd: (context, event) => {\n        console.log('onOpenCancel', { context, event })\n      },\n      onSnapEnd: (context, event) => {\n        console.log('onSnapEnd', { context, event })\n      },\n      onRezizeEnd: (context, event) => {\n        console.log('onRezizeEnd', { context, event })\n      },\n    },\n    services: {\n      onSnapStart: async () => {\n        await sleep()\n      },\n      onOpenStart: async () => {\n        await sleep()\n      },\n      onCloseStart: async () => {\n        await sleep()\n      },\n      onResizeStart: async () => {\n        await sleep()\n      },\n      onSnapEnd: async () => {\n        await sleep()\n      },\n      onOpenEnd: async () => {\n        await sleep()\n      },\n      onCloseEnd: async () => {\n        await sleep()\n      },\n      onResizeEnd: async () => {\n        await sleep()\n      },\n      renderVisuallyHidden: async (context, event) => {\n        console.group('renderVisuallyHidden')\n        console.log({ context, event })\n        await sleep()\n        console.groupEnd()\n      },\n      activate: async (context, event) => {\n        console.group('activate')\n        console.log({ context, event })\n        await sleep()\n        console.groupEnd()\n      },\n      deactivate: async (context, event) => {\n        console.group('deactivate')\n        console.log({ context, event })\n        await sleep()\n        console.groupEnd()\n      },\n      openSmoothly: async (context, event) => {\n        console.group('openSmoothly')\n        console.log({ context, event })\n        await sleep()\n        console.groupEnd()\n      },\n      openImmediately: async (context, event) => {\n        console.group('openImmediately')\n        console.log({ context, event })\n        await sleep()\n        console.groupEnd()\n      },\n      snapSmoothly: async (context, event) => {\n        console.group('snapSmoothly')\n        console.log({ context, event })\n        await sleep()\n        console.groupEnd()\n      },\n      resizeSmoothly: async (context, event) => {\n        console.group('resizeSmoothly')\n        console.log({ context, event })\n        await sleep()\n        console.groupEnd()\n      },\n      closeSmoothly: async (context, event) => {\n        console.group('closeSmoothly')\n        console.log({ context, event })\n        await sleep()\n        console.groupEnd()\n      },\n    },\n    guards: { initiallyClosed, initiallyOpen },\n  }\n)\n","//\n// In order to greatly reduce complexity this component is designed to always transition to open on mount, and then\n// transition to a closed state later. This ensures that all memory used to keep track of animation and gesture state\n// can be reclaimed after the sheet is closed and then unmounted.\n// It also ensures that when transitioning to open on mount the state is always clean, not affected by previous states that could\n// cause race conditions.\n\nimport { useMachine } from '@xstate/react'\nimport React, {\n  useCallback,\n  useEffect,\n  useImperativeHandle,\n  useRef,\n} from 'react'\nimport { animated, config } from 'react-spring'\nimport { rubberbandIfOutOfBounds, useDrag } from 'react-use-gesture'\nimport {\n  useAriaHider,\n  useFocusTrap,\n  useLayoutEffect,\n  useReady,\n  useReducedMotion,\n  useScrollLock,\n  useSnapPoints,\n  useSpring,\n  useSpringInterpolations,\n} from './hooks'\nimport { overlayMachine } from './machines/overlay'\nimport type {\n  defaultSnapProps,\n  Props,\n  RefHandles,\n  ResizeSource,\n  SnapPointProps,\n} from './types'\nimport { debugging } from './utils'\n\nconst { tension, friction } = config.default\n\n// @TODO implement AbortController to deal with race conditions\n\n// @TODO rename to SpringBottomSheet and allow userland to import it directly, for those who want maximum control and minimal bundlesize\nexport const BottomSheet = React.forwardRef<\n  RefHandles,\n  {\n    initialState: 'OPEN' | 'CLOSED'\n    lastSnapRef: React.MutableRefObject<number | null>\n  } & Props\n>(function BottomSheetInternal(\n  {\n    children,\n    sibling,\n    className,\n    footer,\n    header,\n    open: _open,\n    initialState,\n    lastSnapRef,\n    initialFocusRef,\n    onDismiss,\n    maxHeight: controlledMaxHeight,\n    defaultSnap: getDefaultSnap = _defaultSnap,\n    snapPoints: getSnapPoints = _snapPoints,\n    blocking = true,\n    scrollLocking = true,\n    style,\n    onSpringStart,\n    onSpringCancel,\n    onSpringEnd,\n    reserveScrollBarGap = blocking,\n    expandOnContentDrag = false,\n    ...props\n  },\n  forwardRef\n) {\n  // Before any animations can start we need to measure a few things, like the viewport and the dimensions of content, and header + footer if they exist\n  // @TODO make ready its own state perhaps, before open or closed\n  const { ready, registerReady } = useReady()\n\n  // Controls the drag handler, used by spring operations that happen outside the render loop in React\n  const canDragRef = useRef(false)\n\n  // This way apps don't have to remember to wrap their callbacks in useCallback to avoid breaking the sheet\n  const onSpringStartRef = useRef(onSpringStart)\n  const onSpringCancelRef = useRef(onSpringCancel)\n  const onSpringEndRef = useRef(onSpringEnd)\n  useEffect(() => {\n    onSpringStartRef.current = onSpringStart\n    onSpringCancelRef.current = onSpringCancel\n    onSpringEndRef.current = onSpringEnd\n  }, [onSpringCancel, onSpringStart, onSpringEnd])\n\n  // Behold, the engine of it all!\n  const [spring, set] = useSpring()\n\n  const containerRef = useRef<HTMLDivElement>(null)\n  const scrollRef = useRef<HTMLDivElement>(null)\n  const contentRef = useRef<HTMLDivElement>(null)\n  const headerRef = useRef<HTMLDivElement>(null)\n  const footerRef = useRef<HTMLDivElement>(null)\n  const overlayRef = useRef<HTMLDivElement | null>(null)\n\n  // Keeps track of the current height, or the height transitioning to\n  const heightRef = useRef(0)\n  const resizeSourceRef = useRef<ResizeSource>()\n  const preventScrollingRef = useRef(false)\n\n  const prefersReducedMotion = useReducedMotion()\n\n  // \"Plugins\" huhuhu\n  const scrollLockRef = useScrollLock({\n    targetRef: scrollRef,\n    enabled: ready && scrollLocking,\n    reserveScrollBarGap,\n  })\n  const ariaHiderRef = useAriaHider({\n    targetRef: containerRef,\n    enabled: ready && blocking,\n  })\n  const focusTrapRef = useFocusTrap({\n    targetRef: containerRef,\n    fallbackRef: overlayRef,\n    initialFocusRef: initialFocusRef || undefined,\n    enabled: ready && blocking && initialFocusRef !== false,\n  })\n\n  const { minSnap, maxSnap, maxHeight, findSnap } = useSnapPoints({\n    contentRef,\n    controlledMaxHeight,\n    footerEnabled: !!footer,\n    footerRef,\n    getSnapPoints,\n    headerEnabled: header !== false,\n    headerRef,\n    heightRef,\n    lastSnapRef,\n    ready,\n    registerReady,\n    resizeSourceRef,\n  })\n\n  // Setup refs that are used in cases where full control is needed over when a side effect is executed\n  const maxHeightRef = useRef(maxHeight)\n  const minSnapRef = useRef(minSnap)\n  const maxSnapRef = useRef(maxSnap)\n  const findSnapRef = useRef(findSnap)\n  const defaultSnapRef = useRef(0)\n  // Sync the refs with current state, giving the spring full control over when to respond to changes\n  useLayoutEffect(() => {\n    maxHeightRef.current = maxHeight\n    maxSnapRef.current = maxSnap\n    minSnapRef.current = minSnap\n    findSnapRef.current = findSnap\n    defaultSnapRef.current = findSnap(getDefaultSnap)\n  }, [findSnap, getDefaultSnap, maxHeight, maxSnap, minSnap])\n\n  // New utility for using events safely\n  const asyncSet = useCallback<typeof set>(\n    // @ts-expect-error\n    ({ onRest, config: { velocity = 1, ...config } = {}, ...opts }) =>\n      new Promise((resolve) =>\n        set({\n          ...opts,\n          config: {\n            velocity,\n            ...config,\n            // @see https://springs.pomb.us\n            mass: 1,\n            // \"stiffness\"\n            tension,\n            // \"damping\"\n            friction: Math.max(\n              friction,\n              friction + (friction - friction * velocity)\n            ),\n          },\n          onRest: (...args) => {\n            resolve(...args)\n            onRest?.(...args)\n          },\n        })\n      ),\n    [set]\n  )\n  const [current, send] = useMachine(overlayMachine, {\n    devTools: debugging,\n    actions: {\n      onOpenCancel: useCallback(\n        () => onSpringCancelRef.current?.({ type: 'OPEN' }),\n        []\n      ),\n      onSnapCancel: useCallback(\n        (context) =>\n          onSpringCancelRef.current?.({\n            type: 'SNAP',\n            source: context.snapSource,\n          }),\n        []\n      ),\n      onCloseCancel: useCallback(\n        () => onSpringCancelRef.current?.({ type: 'CLOSE' }),\n        []\n      ),\n      onResizeCancel: useCallback(\n        () =>\n          onSpringCancelRef.current?.({\n            type: 'RESIZE',\n            source: resizeSourceRef.current,\n          }),\n        []\n      ),\n      onOpenEnd: useCallback(\n        () => onSpringEndRef.current?.({ type: 'OPEN' }),\n        []\n      ),\n      onSnapEnd: useCallback(\n        (context, event) =>\n          onSpringEndRef.current?.({\n            type: 'SNAP',\n            source: context.snapSource,\n          }),\n        []\n      ),\n      onResizeEnd: useCallback(\n        () =>\n          onSpringEndRef.current?.({\n            type: 'RESIZE',\n            source: resizeSourceRef.current,\n          }),\n        []\n      ),\n    },\n    context: { initialState },\n    services: {\n      onSnapStart: useCallback(\n        async (context, event) =>\n          onSpringStartRef.current?.({\n            type: 'SNAP',\n            source: event.payload.source || 'custom',\n          }),\n        []\n      ),\n      onOpenStart: useCallback(\n        async () => onSpringStartRef.current?.({ type: 'OPEN' }),\n        []\n      ),\n      onCloseStart: useCallback(\n        async () => onSpringStartRef.current?.({ type: 'CLOSE' }),\n        []\n      ),\n      onResizeStart: useCallback(\n        async () =>\n          onSpringStartRef.current?.({\n            type: 'RESIZE',\n            source: resizeSourceRef.current,\n          }),\n        []\n      ),\n      onSnapEnd: useCallback(\n        async (context, event) =>\n          onSpringEndRef.current?.({\n            type: 'SNAP',\n            source: context.snapSource,\n          }),\n        []\n      ),\n      onOpenEnd: useCallback(\n        async () => onSpringEndRef.current?.({ type: 'OPEN' }),\n        []\n      ),\n      onCloseEnd: useCallback(\n        async () => onSpringEndRef.current?.({ type: 'CLOSE' }),\n        []\n      ),\n      onResizeEnd: useCallback(\n        async () =>\n          onSpringEndRef.current?.({\n            type: 'RESIZE',\n            source: resizeSourceRef.current,\n          }),\n        []\n      ),\n      renderVisuallyHidden: useCallback(\n        async (context, event) => {\n          await asyncSet({\n            y: defaultSnapRef.current,\n            ready: 0,\n            maxHeight: maxHeightRef.current,\n            maxSnap: maxSnapRef.current,\n            // Using defaultSnapRef instead of minSnapRef to avoid animating `height` on open\n            minSnap: defaultSnapRef.current,\n            immediate: true,\n          })\n        },\n        [asyncSet]\n      ),\n      activate: useCallback(\n        async (context, event) => {\n          canDragRef.current = true\n          await Promise.all([\n            scrollLockRef.current.activate(),\n            focusTrapRef.current.activate(),\n            ariaHiderRef.current.activate(),\n          ])\n        },\n        [ariaHiderRef, focusTrapRef, scrollLockRef]\n      ),\n      deactivate: useCallback(async () => {\n        scrollLockRef.current.deactivate()\n        focusTrapRef.current.deactivate()\n        ariaHiderRef.current.deactivate()\n        canDragRef.current = false\n      }, [ariaHiderRef, focusTrapRef, scrollLockRef]),\n      openImmediately: useCallback(async () => {\n        heightRef.current = defaultSnapRef.current\n        await asyncSet({\n          y: defaultSnapRef.current,\n          ready: 1,\n          maxHeight: maxHeightRef.current,\n          maxSnap: maxSnapRef.current,\n          // Using defaultSnapRef instead of minSnapRef to avoid animating `height` on open\n          minSnap: defaultSnapRef.current,\n          immediate: true,\n        })\n      }, [asyncSet]),\n      openSmoothly: useCallback(async () => {\n        await asyncSet({\n          y: 0,\n          ready: 1,\n          maxHeight: maxHeightRef.current,\n          maxSnap: maxSnapRef.current,\n          // Using defaultSnapRef instead of minSnapRef to avoid animating `height` on open\n          minSnap: defaultSnapRef.current,\n          immediate: true,\n        })\n\n        heightRef.current = defaultSnapRef.current\n\n        await asyncSet({\n          y: defaultSnapRef.current,\n          ready: 1,\n          maxHeight: maxHeightRef.current,\n          maxSnap: maxSnapRef.current,\n          // Using defaultSnapRef instead of minSnapRef to avoid animating `height` on open\n          minSnap: defaultSnapRef.current,\n          immediate: prefersReducedMotion.current,\n        })\n      }, [asyncSet, prefersReducedMotion]),\n      snapSmoothly: useCallback(\n        async (context, event) => {\n          const snap = findSnapRef.current(context.y)\n          heightRef.current = snap\n          lastSnapRef.current = snap\n          await asyncSet({\n            y: snap,\n            ready: 1,\n            maxHeight: maxHeightRef.current,\n            maxSnap: maxSnapRef.current,\n            minSnap: minSnapRef.current,\n            immediate: prefersReducedMotion.current,\n            config: { velocity: context.velocity },\n          })\n        },\n        [asyncSet, lastSnapRef, prefersReducedMotion]\n      ),\n      resizeSmoothly: useCallback(async () => {\n        const snap = findSnapRef.current(heightRef.current)\n        heightRef.current = snap\n        lastSnapRef.current = snap\n        await asyncSet({\n          y: snap,\n          ready: 1,\n          maxHeight: maxHeightRef.current,\n          maxSnap: maxSnapRef.current,\n          minSnap: minSnapRef.current,\n          immediate:\n            resizeSourceRef.current === 'element'\n              ? prefersReducedMotion.current\n              : true,\n        })\n      }, [asyncSet, lastSnapRef, prefersReducedMotion]),\n      closeSmoothly: useCallback(\n        async (context, event) => {\n          // Avoid animating the height property on close and stay within FLIP bounds by upping the minSnap\n          asyncSet({\n            minSnap: heightRef.current,\n            immediate: true,\n          })\n\n          heightRef.current = 0\n\n          await asyncSet({\n            y: 0,\n            maxHeight: maxHeightRef.current,\n            maxSnap: maxSnapRef.current,\n            immediate: prefersReducedMotion.current,\n          })\n\n          await asyncSet({ ready: 0, immediate: true })\n        },\n        [asyncSet, prefersReducedMotion]\n      ),\n    },\n  })\n\n  useEffect(() => {\n    if (!ready) return\n\n    if (_open) {\n      send('OPEN')\n    } else {\n      send('CLOSE')\n    }\n  }, [_open, send, ready])\n  useLayoutEffect(() => {\n    // Adjust the height whenever the snap points are changed due to resize events\n    if (maxHeight || maxSnap || minSnap) {\n      send('RESIZE')\n    }\n  }, [maxHeight, maxSnap, minSnap, send])\n  useEffect(\n    () => () => {\n      // Ensure effects are cleaned up on unmount, in case they're not cleaned up otherwise\n      scrollLockRef.current.deactivate()\n      focusTrapRef.current.deactivate()\n      ariaHiderRef.current.deactivate()\n    },\n    [ariaHiderRef, focusTrapRef, scrollLockRef]\n  )\n\n  useImperativeHandle(\n    forwardRef,\n    () => ({\n      snapTo: (numberOrCallback, { velocity = 1, source = 'custom' } = {}) => {\n        send('SNAP', {\n          payload: {\n            y: findSnapRef.current(numberOrCallback),\n            velocity,\n            source,\n          },\n        })\n      },\n      get height() {\n        return heightRef.current\n      },\n    }),\n    [send]\n  )\n\n  useEffect(() => {\n    const elem = scrollRef.current\n\n    const preventScrolling = e => {\n      if (preventScrollingRef.current) {\n        e.preventDefault()\n      }\n    }\n\n    const preventSafariOverscroll = e => {\n      if (elem.scrollTop < 0) {\n        requestAnimationFrame(() => {\n          elem.style.overflow = 'hidden'\n          elem.scrollTop = 0\n          elem.style.removeProperty('overflow')\n        })\n        e.preventDefault()\n      }\n    }\n\n    if (expandOnContentDrag) {\n      elem.addEventListener('scroll', preventScrolling)\n      elem.addEventListener('touchmove', preventScrolling)\n      elem.addEventListener('touchstart', preventSafariOverscroll)\n    }\n    return () => {\n      elem.removeEventListener('scroll', preventScrolling)\n      elem.removeEventListener('touchmove', preventScrolling)\n      elem.removeEventListener('touchstart', preventSafariOverscroll)\n    }\n  }, [expandOnContentDrag, scrollRef])\n\n  const handleDrag = ({\n    args: [{ closeOnTap = false, isContentDragging = false } = {}] = [],\n    cancel,\n    direction: [, direction],\n    down,\n    first,\n    last,\n    memo = spring.y.getValue() as number,\n    movement: [, _my],\n    tap,\n    velocity,\n  }) => {\n    const my = _my * -1\n\n    // Cancel the drag operation if the canDrag state changed\n    if (!canDragRef.current) {\n      console.log('handleDrag cancelled dragging because canDragRef is false')\n      cancel()\n      return memo\n    }\n\n    if (onDismiss && closeOnTap && tap) {\n      cancel()\n      // Runs onDismiss in a timeout to avoid tap events on the backdrop from triggering click events on elements underneath\n      setTimeout(() => onDismiss(), 0)\n      return memo\n    }\n\n    // Filter out taps\n    if (tap) {\n      return memo\n    }\n\n    const rawY = memo + my\n    const predictedDistance = my * velocity\n    const predictedY = Math.max(\n      minSnapRef.current,\n      Math.min(maxSnapRef.current, rawY + predictedDistance * 2)\n    )\n\n    if (\n      !down &&\n      onDismiss &&\n      direction > 0 &&\n      rawY + predictedDistance < minSnapRef.current / 2\n    ) {\n      cancel()\n      onDismiss()\n      return memo\n    }\n\n    let newY = down\n      ? // @TODO figure out a better way to deal with rubberband overshooting if min and max have the same value\n        !onDismiss && minSnapRef.current === maxSnapRef.current\n        ? rawY < minSnapRef.current\n          ? rubberbandIfOutOfBounds(\n              rawY,\n              minSnapRef.current,\n              maxSnapRef.current * 2,\n              0.55\n            )\n          : rubberbandIfOutOfBounds(\n              rawY,\n              minSnapRef.current / 2,\n              maxSnapRef.current,\n              0.55\n            )\n        : rubberbandIfOutOfBounds(\n            rawY,\n            onDismiss ? 0 : minSnapRef.current,\n            maxSnapRef.current,\n            0.55\n          )\n      : predictedY\n\n    if (expandOnContentDrag && isContentDragging) {\n      if (newY >= maxSnapRef.current) {\n        newY = maxSnapRef.current\n      }\n\n      if (memo === maxSnapRef.current && scrollRef.current.scrollTop > 0) {\n        newY = maxSnapRef.current\n      }\n\n      preventScrollingRef.current = newY < maxSnapRef.current;\n    } else {\n      preventScrollingRef.current = false\n    }\n\n    if (first) {\n      send('DRAG')\n    }\n\n    if (last) {\n      send('SNAP', {\n        payload: {\n          y: newY,\n          velocity: velocity > 0.05 ? velocity : 1,\n          source: 'dragging',\n        },\n      })\n\n      return memo\n    }\n\n    // @TODO too many rerenders\n    //send('DRAG', { y: newY, velocity })\n    //*\n    set({\n      y: newY,\n      ready: 1,\n      maxHeight: maxHeightRef.current,\n      maxSnap: maxSnapRef.current,\n      minSnap: minSnapRef.current,\n      immediate: true,\n      config: { velocity },\n    })\n    // */\n\n    return memo\n  }\n\n  const bind = useDrag(handleDrag, {\n    filterTaps: true,\n  })\n\n  if (Number.isNaN(maxSnapRef.current)) {\n    throw new TypeError('maxSnapRef is NaN!!')\n  }\n  if (Number.isNaN(minSnapRef.current)) {\n    throw new TypeError('minSnapRef is NaN!!')\n  }\n\n  const interpolations = useSpringInterpolations({ spring })\n\n  return (\n    <animated.div\n      {...props}\n      data-rsbs-root\n      data-rsbs-state={publicStates.find(current.matches)}\n      data-rsbs-is-blocking={blocking}\n      data-rsbs-is-dismissable={!!onDismiss}\n      data-rsbs-has-header={!!header}\n      data-rsbs-has-footer={!!footer}\n      className={className}\n      ref={containerRef}\n      style={{\n        // spread in the interpolations yeees\n        ...interpolations,\n        // but allow overriding them/disabling them\n        ...style,\n        // Not overridable as the \"focus lock with opacity 0\" trick rely on it\n        // @TODO the line below only fails on TS <4\n        // @ts-ignore\n        opacity: spring.ready,\n      }}\n    >\n      {sibling}\n      {blocking && (\n        <div\n          // This component needs to be placed outside bottom-sheet, as bottom-sheet uses transform and thus creates a new context\n          // that clips this element to the container, not allowing it to cover the full page.\n          key=\"backdrop\"\n          data-rsbs-backdrop\n          {...bind({ closeOnTap: true })}\n        />\n      )}\n      <div\n        key=\"overlay\"\n        aria-modal=\"true\"\n        role=\"dialog\"\n        data-rsbs-overlay\n        tabIndex={-1}\n        ref={overlayRef}\n        onKeyDown={(event) => {\n          if (event.key === 'Escape') {\n            // Always stop propagation, to avoid weirdness for bottom sheets inside other bottom sheets\n            event.stopPropagation()\n            if (onDismiss) onDismiss()\n          }\n        }}\n      >\n        {header !== false && (\n          <div key=\"header\" data-rsbs-header ref={headerRef} {...bind()}>\n            {header}\n          </div>\n        )}\n        <div key=\"scroll\" data-rsbs-scroll ref={scrollRef} {...(expandOnContentDrag ? bind({ isContentDragging: true }) : {})}>\n          <div data-rsbs-content ref={contentRef}>\n            {children}\n          </div>\n        </div>\n        {footer && (\n          <div key=\"footer\" ref={footerRef} data-rsbs-footer {...bind()}>\n            {footer}\n          </div>\n        )}\n      </div>\n    </animated.div>\n  )\n})\n\n// Used for the data attribute, list over states available to CSS selectors\nconst publicStates = [\n  'closed',\n  'opening',\n  'open',\n  'closing',\n  'dragging',\n  'snapping',\n  'resizing',\n]\n\n// Default prop values that are callbacks, and it's nice to save some memory and reuse their instances since they're pure\nfunction _defaultSnap({ snapPoints, lastSnap }: defaultSnapProps) {\n  return lastSnap ?? Math.min(...snapPoints)\n}\nfunction _snapPoints({ minHeight }: SnapPointProps) {\n  return minHeight\n}\n","// Keeps track of wether everything is good to go or not, in the most efficient way possible\n\nimport { useCallback, useEffect, useState } from 'react'\n\nexport function useReady() {\n  const [ready, setReady] = useState(false)\n  const [readyMap, updateReadyMap] = useState<{ [key: string]: boolean }>({})\n\n  const registerReady = useCallback((key: string) => {\n    console.count(`registerReady:${key}`)\n    // Register the check we're gonna wait for until it's ready\n    updateReadyMap((ready) => ({ ...ready, [key]: false }))\n\n    return () => {\n      console.count(`setReady:${key}`)\n      // Set it to ready\n      updateReadyMap((ready) => ({ ...ready, [key]: true }))\n    }\n  }, [])\n\n  useEffect(() => {\n    const states = Object.values(readyMap)\n\n    if (states.length === 0) {\n      console.log('nope nothing registered yet')\n      return\n    }\n\n    const isReady = states.every(Boolean)\n    console.log('check if we are rready', readyMap, isReady)\n    if (isReady) {\n      console.warn('ready!')\n      setReady(true)\n    }\n  }, [readyMap])\n\n  return { ready, registerReady }\n}\n","import { useDebugValue, useEffect, useMemo, useRef } from 'react'\n\n// @TODO refactor to addEventListener\nexport function useReducedMotion() {\n  const mql = useMemo(\n    () =>\n      typeof window !== 'undefined'\n        ? window.matchMedia('(prefers-reduced-motion: reduce)')\n        : null,\n    []\n  )\n  const ref = useRef(mql?.matches)\n\n  useDebugValue(ref.current ? 'reduce' : 'no-preference')\n\n  useEffect(() => {\n    const handler = (event) => {\n      ref.current = event.matches\n    }\n    mql?.addListener(handler)\n\n    return () => mql?.removeListener(handler)\n  }, [mql])\n\n  return ref\n}\n","import { useSpring as useReactSpring } from 'react-spring'\n\n// Behold, the engine of it all!\n// Put in this file befause it makes it easier to type and I'm lazy! :D\n\nexport function useSpring() {\n  return useReactSpring(() => ({\n    y: 0,\n    ready: 0,\n    maxHeight: 0,\n    minSnap: 0,\n    maxSnap: 0,\n  }))\n}\n\nexport type Spring = ReturnType<typeof useSpring>[0]\nexport type SpringSet = ReturnType<typeof useSpring>[1]\n","import { disableBodyScroll, enableBodyScroll } from 'body-scroll-lock'\nimport { useDebugValue, useEffect, useRef } from 'react'\n\n/**\n * Handle scroll locking to ensure a good dragging experience on Android and iOS.\n *\n * On iOS the following may happen if scroll isn't locked:\n * - When dragging the sheet the background gets dragged at the same time.\n * - When dragging the page scroll is also affected, causing the drag to feel buggy and \"slow\".\n *\n * On Android it causes the chrome toolbar to pop down as you drag down, and hide as you drag up.\n * When it's in between two toolbar states it causes the framerate to drop way below 60fps on\n * the bottom sheet drag interaction.\n */\nexport function useScrollLock({\n  targetRef,\n  enabled,\n  reserveScrollBarGap,\n}: {\n  targetRef: React.RefObject<Element>\n  enabled: boolean\n  reserveScrollBarGap: boolean\n}) {\n  const ref = useRef<{ activate: () => void; deactivate: () => void }>({\n    activate: () => {\n      throw new TypeError('Tried to activate scroll lock too early')\n    },\n    deactivate: () => {},\n  })\n\n  useDebugValue(enabled ? 'Enabled' : 'Disabled')\n\n  useEffect(() => {\n    if (!enabled) {\n      ref.current.deactivate()\n      ref.current = { activate: () => {}, deactivate: () => {} }\n      return\n    }\n\n    const target = targetRef.current\n    let active = false\n\n    ref.current = {\n      activate: () => {\n        if (active) return\n        active = true\n        disableBodyScroll(target, {\n          allowTouchMove: (el) => el.closest('[data-body-scroll-lock-ignore]'),\n          reserveScrollBarGap,\n        })\n      },\n      deactivate: () => {\n        if (!active) return\n        active = false\n        enableBodyScroll(target)\n      },\n    }\n  }, [enabled, targetRef, reserveScrollBarGap])\n\n  return ref\n}\n","import React, { useDebugValue, useEffect, useRef } from 'react'\n\n// Handle hiding and restoring aria-hidden attributes\nexport function useAriaHider({\n  targetRef,\n  enabled,\n}: {\n  targetRef: React.RefObject<Element>\n  enabled: boolean\n}) {\n  const ref = useRef<{ activate: () => void; deactivate: () => void }>({\n    activate: () => {\n      throw new TypeError('Tried to activate aria hider too early')\n    },\n    deactivate: () => {},\n  })\n\n  useDebugValue(enabled ? 'Enabled' : 'Disabled')\n\n  useEffect(() => {\n    if (!enabled) {\n      ref.current.deactivate()\n      ref.current = { activate: () => {}, deactivate: () => {} }\n      return\n    }\n\n    const target = targetRef.current\n    let active = false\n    let originalValues: (null | string)[] = []\n    let rootNodes: Element[] = []\n\n    ref.current = {\n      activate: () => {\n        if (active) return\n        active = true\n\n        const parentNode = target.parentNode\n\n        document.querySelectorAll('body > *').forEach((node) => {\n          if (node === parentNode) {\n            return\n          }\n          let attr = node.getAttribute('aria-hidden')\n          let alreadyHidden = attr !== null && attr !== 'false'\n          if (alreadyHidden) {\n            return\n          }\n          originalValues.push(attr)\n          rootNodes.push(node)\n          node.setAttribute('aria-hidden', 'true')\n        })\n      },\n      deactivate: () => {\n        if (!active) return\n        active = false\n\n        rootNodes.forEach((node, index) => {\n          let originalValue = originalValues[index]\n          if (originalValue === null) {\n            node.removeAttribute('aria-hidden')\n          } else {\n            node.setAttribute('aria-hidden', originalValue)\n          }\n        })\n        originalValues = []\n        rootNodes = []\n      },\n    }\n  }, [targetRef, enabled])\n\n  return ref\n}\n","import { createFocusTrap } from 'focus-trap'\nimport { useDebugValue, useEffect, useRef } from 'react'\n\nexport function useFocusTrap({\n  targetRef,\n  fallbackRef,\n  initialFocusRef,\n  enabled,\n}: {\n  targetRef: React.RefObject<HTMLElement>\n  fallbackRef: React.RefObject<HTMLElement>\n  initialFocusRef?: React.RefObject<HTMLElement>\n  enabled: boolean\n}) {\n  const ref = useRef<{ activate: () => void; deactivate: () => void }>({\n    activate: () => {\n      throw new TypeError('Tried to activate focus trap too early')\n    },\n    deactivate: () => {},\n  })\n\n  useDebugValue(enabled ? 'Enabled' : 'Disabled')\n\n  useEffect(() => {\n    if (!enabled) {\n      ref.current.deactivate()\n      ref.current = { activate: () => {}, deactivate: () => {} }\n      return\n    }\n\n    const fallback = fallbackRef.current\n    const trap = createFocusTrap(targetRef.current, {\n      onActivate:\n        process.env.NODE_ENV !== 'production'\n          ? () => {\n              console.log('focus activate')\n            }\n          : undefined,\n      // If initialFocusRef is manually specified we don't want the first tabbable element to receive focus if initialFocusRef can't be found\n      initialFocus: initialFocusRef\n        ? () => initialFocusRef?.current || fallback\n        : undefined,\n      fallbackFocus: fallback,\n      escapeDeactivates: false,\n      clickOutsideDeactivates: false,\n    })\n    let active = false\n\n    ref.current = {\n      activate: async () => {\n        if (active) return\n        active = true\n\n        await trap.activate()\n        // it's difficult to know exactly when focus is udpated https://github.com/focus-trap/focus-trap/blob/036a72ec48b85414dda00ec0c40d631c8f0ae5ce/index.js#L369-L371\n        // This timeout is attempting to compromise between a reasonable guess, as well as not delaying the open transition more than necessary\n        await new Promise((resolve) => setTimeout(() => resolve(void 1), 0))\n      },\n      deactivate: () => {\n        if (!active) return\n        active = false\n\n        trap.deactivate()\n      },\n    }\n  }, [enabled, fallbackRef, initialFocusRef, targetRef])\n\n  return ref\n}\n","import { interpolate } from 'react-spring'\nimport type { Spring } from './useSpring'\nimport { clamp } from '../utils'\n\n// It's a bit easier to ensure interpolations don't accidentally use the wrong variables by\n// putting them here, in their own closure with explicitly defined variables used\n\n// Note that the callbacks in the interpolation functions close over their scope every time react renders\n// so it's important that if anything can change outside of render that needs to be available\n// in the interpolation then a ref must be used\n\nexport function useSpringInterpolations({\n  spring,\n}: {\n  spring: Spring\n}): React.CSSProperties {\n  // This effect is for removing rounded corners on phones when the sheet touches the top of the browser chrome\n  // as it's really ugly with the gaps border radius creates. This ensures it looks sleek.\n  // @TODO the ts-ignore comments are because the `extrapolate` param isn't in the TS defs for some reason\n  const interpolateBorderRadius = interpolate(\n    // @ts-expect-error\n    [spring.y, spring.maxHeight],\n    (y, maxHeight) => {\n      return `${Math.round(clamp(maxHeight - y, 0, 16))}px`\n    }\n  )\n\n  /*\n   * Only animate the height when absolute necessary\n   * @TODO currently it's only able to opt out of changing the height if there's just a single snapshot\n   *       but it should be possible to do it in other scenarios too, like on window resize,\n   *       or maybe even while dragging, but probably requires a more restrictive CSS.\n   *       As in now the sticky footer isn't overlapping the content, allowing `backdrop-filter: blur(8px)` effects.\n   *       A FLIP resize flow for content height would likely require the sticky elements to overlap the content area.\n   *       Could be done as a separat mode though, or a separate example CSS for max performance.\n   */\n  const interpolateHeight = interpolate(\n    // @ts-ignore\n    [spring.y, spring.minSnap, spring.maxSnap],\n    (y, minSnap, maxSnap) => `${clamp(y, minSnap, maxSnap)}px`\n  )\n\n  const interpolateY = interpolate(\n    // @ts-ignore\n    [spring.y, spring.minSnap, spring.maxSnap],\n    (y, minSnap, maxSnap) => {\n      if (y < minSnap) {\n        return `${minSnap - y}px`\n      }\n      if (y > maxSnap) {\n        return `${maxSnap - y}px`\n      }\n      return '0px'\n    }\n  )\n\n  const interpolateFiller = interpolate(\n    // @ts-ignore\n    [spring.y, spring.maxSnap],\n    (y, maxSnap) => {\n      if (y >= maxSnap) {\n        return Math.ceil(y - maxSnap)\n      }\n      return 0\n    }\n  )\n\n  const interpolateContentOpacity = interpolate(\n    // @ts-ignore\n    [spring.y, spring.minSnap],\n    (y, minSnap) => {\n      if (!minSnap) {\n        return 0\n      }\n      const minX = Math.max(minSnap / 2 - 45, 0)\n      const maxX = Math.min(minSnap / 2 + 45, minSnap)\n      const minY = 0\n      const maxY = 1\n\n      const slope = (maxY - minY) / (maxX - minX)\n      const res = (y - minX) * (slope + minY)\n      return clamp(res, 0, 1)\n    }\n  )\n\n  const interpolateBackdrop = interpolate(\n    // @ts-ignore\n    [spring.y, spring.minSnap],\n    (y, minSnap) => (minSnap ? clamp(y / minSnap, 0, 1) : 0)\n  )\n\n  return {\n    // Fancy content fade-in effect\n    ['--rsbs-content-opacity' as any]: interpolateContentOpacity,\n    // Fading in the backdrop\n    ['--rsbs-backdrop-opacity' as any]: interpolateBackdrop,\n    // Scaling the antigap in the bottom\n    ['--rsbs-antigap-scale-y' as any]: interpolateFiller,\n    // Shifts the position of the bottom sheet, used on open and close primarily as snap point changes usually only interpolate the height\n    ['--rsbs-overlay-translate-y' as any]: interpolateY,\n    // Remove rounded borders when full height, it looks much better this way\n    ['--rsbs-overlay-rounded' as any]: interpolateBorderRadius,\n    // Animates the height state, not the most performant way but it's the safest with regards to mobile browser and focus/scrolling that could happen while animating\n    ['--rsbs-overlay-h' as any]: interpolateHeight,\n  }\n}\n","/* eslint-disable react/jsx-pascal-case */\nimport Portal from '@reach/portal'\nimport React, { forwardRef, useRef, useState, useCallback } from 'react'\nimport { BottomSheet as _BottomSheet } from './BottomSheet'\nimport type { Props, RefHandles, SpringEvent } from './types'\nimport { useLayoutEffect } from './hooks'\n\nexport type {\n  RefHandles as BottomSheetRef,\n  Props as BottomSheetProps,\n} from './types'\n\n// Because SSR is annoying to deal with, and all the million complaints about window, navigator and dom elenents!\nexport const BottomSheet = forwardRef<RefHandles, Props>(function BottomSheet(\n  { onSpringStart, onSpringEnd, skipInitialTransition, ...props },\n  ref\n) {\n  // Mounted state, helps SSR but also ensures you can't tab into the sheet while it's closed, or nav there in a screen reader\n  const [mounted, setMounted] = useState(false)\n  const timerRef = useRef<ReturnType<typeof requestAnimationFrame>>()\n  // The last point that the user snapped to, useful for open/closed toggling and the user defined height is remembered\n  const lastSnapRef = useRef(null)\n  // @TODO refactor to an initialState: OPEN | CLOSED property as it's much easier to understand\n  // And informs what we should animate from. If the sheet is mounted with open = true, then initialState = OPEN.\n  // When initialState = CLOSED, then internal sheet must first render with open={false} before setting open={props.open}\n  // It's only when initialState and props.open is mismatching that a intial transition should happen\n  // If they match then transitions will only happen when a user interaction or resize event happen.\n  const initialStateRef = useRef<'OPEN' | 'CLOSED'>(\n    skipInitialTransition && props.open ? 'OPEN' : 'CLOSED'\n  )\n\n  // Using layout effect to support cases where the bottom sheet have to appear already open, no transition\n  useLayoutEffect(() => {\n    if (props.open) {\n      cancelAnimationFrame(timerRef.current)\n      setMounted(true)\n\n      // Cleanup defaultOpen state on close\n      return () => {\n        initialStateRef.current = 'CLOSED'\n      }\n    }\n  }, [props.open])\n\n  const handleSpringStart = useCallback(\n    async function handleSpringStart(event: SpringEvent) {\n      // Forward the event\n      await onSpringStart?.(event)\n\n      if (event.type === 'OPEN') {\n        // Ensures that when it's opening we abort any pending unmount action\n        cancelAnimationFrame(timerRef.current)\n      }\n    },\n    [onSpringStart]\n  )\n\n  const handleSpringEnd = useCallback(\n    async function handleSpringEnd(event: SpringEvent) {\n      // Forward the event\n      await onSpringEnd?.(event)\n\n      if (event.type === 'CLOSE') {\n        // Unmount from the dom to avoid contents being tabbable or visible to screen readers while closed\n        timerRef.current = requestAnimationFrame(() => setMounted(false))\n      }\n    },\n    [onSpringEnd]\n  )\n\n  // This isn't just a performance optimization, it's also to avoid issues when running a non-browser env like SSR\n  if (!mounted) {\n    return null\n  }\n\n  return (\n    <Portal data-rsbs-portal>\n      <_BottomSheet\n        {...props}\n        lastSnapRef={lastSnapRef}\n        ref={ref}\n        initialState={initialStateRef.current}\n        onSpringStart={handleSpringStart}\n        onSpringEnd={handleSpringEnd}\n      />\n    </Portal>\n  )\n})\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;IAGaA,CAAA,GACO,sBAAXC,MAAA,GAAyBC,CAAA,GAAwBC,CAAA;AAAA,SCD1CC,EAAMC,CAAA,EAAgBC,CAAA,EAAeC,CAAA;EAUnD,OANAD,CAAA,IAFAA,CAAA,IAASA,CAAA,KAESA,CAAA,GAAQA,CAAA,GAAQ,GAClCC,CAAA,IAFAA,CAAA,IAASA,CAAA,KAESA,CAAA,GAAQA,CAAA,GAAQ,IAJlCF,CAAA,IAAUA,CAAA,KAKKA,CAAA,KAEbA,CAAA,IADAA,CAAA,GAASA,CAAA,IAAUE,CAAA,GAAQF,CAAA,GAASE,CAAA,KACjBD,CAAA,GAAQD,CAAA,GAASC,CAAA,GAE/BD,CAAA;AAAA;AAAA,SAUOG,EAAoBH,CAAA;EAClC,IAAMC,CAAA,GAAUG,IAAA,CAAKC,KAAA,CAAML,CAAA;EAC3B,IAAIM,MAAA,CAAOC,KAAA,CAAMP,CAAA,GACf,UAAUQ,SAAA,CACR;EAIJ,OAAOP,CAAA;AAAA;ACqIT,IAAMQ,CAAA,GAAyC;EAG7CC,GAAA,EAAK;AAAA;AAOP,SAASC,EACPX,CAAA,EAAAC,CAAA;EAAA,IAEEC,CAAA,GAAAD,CAAA,CAAAW,KAAA;IACAd,CAAA,GAAAG,CAAA,CAAAY,OAAA;IACAhB,CAAA,GAAAI,CAAA,CAAAa,eAAA;IAAAC,CAAA,GAOoBC,CAAA,CAAS;IAA1BC,CAAA,GAAAF,CAAA;IAAMG,CAAA,GAAAH,CAAA;EAEXI,CAAA,CAAiBjB,CAAA,UAAUe,CAAA;EAE3B,IAAMG,CAAA,GAAeC,CAAA,CACnB,UAACrB,CAAA;IAECkB,CAAA,CAAQlB,CAAA,CAAQ,GAAGsB,aAAA,CAAc,GAAGC,SAAA,GACpC1B,CAAA,CAAgB2B,OAAA,GAAU;EAAA,GAE5B,CAAC3B,CAAA;EAgBH,OAbAF,CAAA,CAAgB;IACd,IAAKK,CAAA,CAAIwB,OAAA,IAAY1B,CAAA,EAArB;MAIA,IAAMG,CAAA,GAAiB,IAAIwB,CAAA,CAAeL,CAAA;MAG1C,OAFAnB,CAAA,CAAeyB,OAAA,CAAQ1B,CAAA,CAAIwB,OAAA,EAASf,CAAA;QAGlCR,CAAA,CAAe0B,UAAA;MAAA;IAAA;EAAA,GAEhB,CAAC3B,CAAA,EAAKoB,CAAA,EAActB,CAAA,IAEhBA,CAAA,GAAUmB,CAAA,GAAO;AAAA;AClH1B,SAASW,EAAM5B,CAAA;EACb,kBADaA,CAAA,KAAAA,CAAA,GAAK,UACP6B,OAAA,CAAQ,UAAC5B,CAAA;IAAA,OAAY6B,UAAA,CAAW7B,CAAA,EAASD,CAAA;EAAA;AAAA;AAGtD,IAGM+B,CAAA,GAAa;IACjBC,IAAA,EAAM;MAAEC,MAAA,EAAQ;MAAqBC,OAAA,EAAS;IAAA;EAAA;EAE1CC,CAAA,GAAe;IACnBC,MAAA,EAAQ;MAAEH,MAAA,EAAQ;MAAqBC,OAAA,EAAS;IAAA;EAAA;EAQrCG,CAAA,GAAiBC,CAAA,CAK5B;IACEC,EAAA,EAAI;IACJC,OAAA,EAAS;IACTC,OAAA,EAAS;MAAEC,YAAA,EAAc;IAAA;IACzBC,MAAA,EAAQ;MACNC,MAAA,EAAQ;QAAEC,EAAA,EAAI;UAAEC,IAAA,EAAM;UAAWC,KAAA,OAAO;QAAA;MAAA;MACxCC,OAAA,EAAS;QACPR,OAAA,EAAS;QACTG,MAAA,EAAQ;UACNM,KAAA,EAAO;YACLC,MAAA,EAAQ;cACNC,GAAA,EAAK;cACLC,MAAA,EAAQ;YAAA;UAAA;UAGZC,UAAA,EAAY;YACVC,MAAA,EAAQ,CACN;cAAErB,MAAA,EAAQ;cAAesB,IAAA,EAAM;YAAA,GAC/B;cAAEtB,MAAA,EAAQ;cAAYsB,IAAA,EAAM;YAAA;UAAA;UAGhCC,WAAA,EAAa;YACXhB,OAAA,EAAS;YACTG,MAAA,EAAQ;cACNc,IAAA,EAAM;gBACJP,MAAA,EAAQ;kBAAEC,GAAA,EAAK;kBAAmBC,MAAA,EAAQ;gBAAA;cAAA;cAE5CM,UAAA,EAAY;gBACVR,MAAA,EAAQ;kBAAEC,GAAA,EAAK;kBAAYC,MAAA,EAAQ;gBAAA;gBACnCP,EAAA,EAAAc,CAAA,KAAS5B,CAAA,EAAeI,CAAA;cAAA;YAAA;UAAA;UAI9ByB,QAAA,EAAU;YACRpB,OAAA,EAAS;YACTG,MAAA,EAAQ;cACNkB,cAAA,EAAgB;gBACdX,MAAA,EAAQ;kBAAEC,GAAA,EAAK;kBAAwBC,MAAA,EAAQ;gBAAA;cAAA;cAEjDM,UAAA,EAAY;gBACVR,MAAA,EAAQ;kBAAEC,GAAA,EAAK;kBAAYC,MAAA,EAAQ;gBAAA;cAAA;cAErCK,IAAA,EAAM;gBACJP,MAAA,EAAQ;kBAAEC,GAAA,EAAK;kBAAgBC,MAAA,EAAQ;gBAAA;gBACvCP,EAAA,EAAAc,CAAA,KAAS5B,CAAA,EAAeI,CAAA;cAAA;YAAA;UAAA;UAI9B2B,GAAA,EAAK;YACHZ,MAAA,EAAQ;cAAEC,GAAA,EAAK;cAAaC,MAAA,EAAQ;YAAA;YACpCP,EAAA,EAAI;cAAEE,KAAA,EAAO;cAAoBf,IAAA,EAAM;YAAA;UAAA;UAEzC+B,IAAA,EAAM;YACJC,IAAA,EAAM;UAAA;QAAA;QAGVnB,EAAA,EAAAc,CAAA,KA5EW;UACjBZ,KAAA,EAAO;YAAEd,MAAA,EAAQ;YAAoBC,OAAA,EAAS;UAAA;QAAA;QA4ExCkB,MAAA,EAAQ;MAAA;MAEVK,IAAA,EAAM;QACJZ,EAAA,EAAI;UAAEb,IAAA,EAAM;UAAqBiC,IAAA,EAAM;UAAY7B,MAAA,EAAQ;QAAA;MAAA;MAE7D8B,QAAA,EAAU;QACRrB,EAAA,EAAI;UAAEoB,IAAA,EAAM;QAAA;MAAA;MAEdE,QAAA,EAAU;QACR3B,OAAA,EAAS;QACTG,MAAA,EAAQ;UACNM,KAAA,EAAO;YACLC,MAAA,EAAQ;cACNC,GAAA,EAAK;cACLC,MAAA,EAAQ;YAAA;YAEVgB,KAAA,EAAO,CACLC,CAAA,CAAO;cAELC,CAAA,EAAG,SAAAA,EAACtE,CAAA,EAAAC,CAAA;gBAAA,OAAAA,CAAA,CAAKsE,OAAA,CAAWD,CAAA;cAAA;cACpBE,QAAA,EAAU,SAAAA,SAACxE,CAAA,EAAAC,CAAA;gBAAA,OAAAA,CAAA,CAAKsE,OAAA,CAAWC,QAAA;cAAA;cAC3BC,UAAA,EAAY,SAAAA,WAACzE,CAAA,EAAAC,CAAA;gBAAA,IAAAC,CAAA,GAAAD,CAAA,CAAKsE,OAAA,CAAWG,MAAA;gBAAA,kBAAAxE,CAAA,GAAS,WAAAA,CAAA;cAAA;YAAA;UAAA;UAI5CyE,gBAAA,EAAkB;YAChBzB,MAAA,EAAQ;cAAEC,GAAA,EAAK;cAAgBC,MAAA,EAAQ;YAAA;UAAA;UAEzCU,GAAA,EAAK;YACHZ,MAAA,EAAQ;cAAEC,GAAA,EAAK;cAAaC,MAAA,EAAQ;YAAA;YACpCP,EAAA,EAAI;cACFT,MAAA,EAAQ;cACR6B,IAAA,EAAM;cACNlB,KAAA,EAAO;cACPf,IAAA,EAAM;YAAA;UAAA;UAGV+B,IAAA,EAAM;YAAEC,IAAA,EAAM;UAAA;QAAA;QAEhBnB,EAAA,EAAI;UACFoB,IAAA,EAAM;YAAEhC,MAAA,EAAQ;YAAYC,OAAA,EAAS;UAAA;UACrCE,MAAA,EAAQ;YAAEH,MAAA,EAAQ;YAAqBC,OAAA,EAAS;UAAA;UAChDF,IAAA,EAAM;YAAEC,MAAA,EAAQ;YAAqBC,OAAA,EAAS;UAAA;UAC9Ca,KAAA,EAAO;YAAEd,MAAA,EAAQ;YAAoBC,OAAA,EAAS;UAAA;QAAA;QAEhDkB,MAAA,EAAQ;MAAA;MAEVwB,QAAA,EAAU;QACRpC,OAAA,EAAS;QACTG,MAAA,EAAQ;UACNM,KAAA,EAAO;YACLC,MAAA,EAAQ;cACNC,GAAA,EAAK;cACLC,MAAA,EAAQ;YAAA;UAAA;UAGZyB,gBAAA,EAAkB;YAChB3B,MAAA,EAAQ;cAAEC,GAAA,EAAK;cAAkBC,MAAA,EAAQ;YAAA;UAAA;UAE3CU,GAAA,EAAK;YACHZ,MAAA,EAAQ;cAAEC,GAAA,EAAK;cAAeC,MAAA,EAAQ;YAAA;YACtCP,EAAA,EAAI;cACFoB,IAAA,EAAM;cACNlB,KAAA,EAAO;cACPf,IAAA,EAAM;YAAA;UAAA;UAGV+B,IAAA,EAAM;YAAEC,IAAA,EAAM;UAAA;QAAA;QAEhBnB,EAAA,EAAI;UACFT,MAAA,EAAQ;YAAEH,MAAA,EAAQ;YAAYC,OAAA,EAAS;UAAA;UACvC+B,IAAA,EAAM;YAAEhC,MAAA,EAAQ;YAAYC,OAAA,EAAS;UAAA;UACrCF,IAAA,EAAM;YAAEC,MAAA,EAAQ;YAAqBC,OAAA,EAAS;UAAA;UAC9Ca,KAAA,EAAO;YAAEd,MAAA,EAAQ;YAAoBC,OAAA,EAAS;UAAA;QAAA;QAEhDkB,MAAA,EAAQ;MAAA;MAEV0B,OAAA,EAAS;QACPtC,OAAA,EAAS;QACTG,MAAA,EAAQ;UACNM,KAAA,EAAO;YACLC,MAAA,EAAQ;cACNC,GAAA,EAAK;cACLC,MAAA,EAAQ;YAAA;YAEVP,EAAA,EAAI;cAAEC,IAAA,EAAM;gBAAEb,MAAA,EAAQ;gBAAiBC,OAAA,EAAS;cAAA;YAAA;UAAA;UAElD6C,YAAA,EAAc;YACZ7B,MAAA,EAAQ;cAAEC,GAAA,EAAK;cAAcC,MAAA,EAAQ;YAAA;UAAA;UAEvC4B,eAAA,EAAiB;YACf9B,MAAA,EAAQ;cAAEC,GAAA,EAAK;cAAiBC,MAAA,EAAQ;YAAA;UAAA;UAE1CU,GAAA,EAAK;YACHZ,MAAA,EAAQ;cAAEC,GAAA,EAAK;cAAcC,MAAA,EAAQ;YAAA;YACrCP,EAAA,EAAI;cACFC,IAAA,EAAM;gBAAEb,MAAA,EAAQ;gBAAoBC,OAAA,EAAS;cAAA;YAAA;UAAA;UAGjD6B,IAAA,EAAM;YAAEC,IAAA,EAAM;UAAA;QAAA;QAEhBnB,EAAA,EAAI;UACFE,KAAA,OAAO;UACPD,IAAA,EAAM;YAAEb,MAAA,EAAQ;YAAoBC,OAAA,EAAS;UAAA;QAAA;QAE/CkB,MAAA,EAAQ;MAAA;IAAA;IAGZP,EAAA,EAAI;MACFE,KAAA,EAAO;IAAA;EAAA,GAGX;IACEb,OAAA,EAAS;MACP+C,YAAA,EAAc,SAAAA,aAACjF,CAAA,EAASC,CAAA;MAGxBiF,YAAA,EAAc,SAAAA,aAAClF,CAAA,EAASC,CAAA;MAGxBkF,cAAA,EAAgB,SAAAA,eAACnF,CAAA,EAASC,CAAA;MAG1BmF,aAAA,EAAe,SAAAA,cAACpF,CAAA,EAASC,CAAA;MAGzBoF,SAAA,EAAW,SAAAA,UAACrF,CAAA,EAASC,CAAA;MAGrBqF,SAAA,EAAW,SAAAA,UAACtF,CAAA,EAASC,CAAA;MAGrBsF,WAAA,EAAa,SAAAA,YAACvF,CAAA,EAASC,CAAA;IAAA;IAIzBuF,QAAA,EAAU;MACRC,WAAA,WAAAA,YAAA;QAAA;UAAA,OAAA5D,OAAA,CAAA6D,OAAA,CACQ9D,CAAA,IAAA+D,IAAA;QAAA,CADG,QAAA3F,CAAA;UAAA,OAAA6B,OAAA,CAAA+D,MAAA,CAAA5F,CAAA;QAAA;MAAA;MAGX6F,WAAA,WAAAA,YAAA;QAAA;UAAA,OAAAhE,OAAA,CAAA6D,OAAA,CACQ9D,CAAA,IAAA+D,IAAA;QAAA,CADG,QAAA3F,CAAA;UAAA,OAAA6B,OAAA,CAAA+D,MAAA,CAAA5F,CAAA;QAAA;MAAA;MAGX8F,YAAA,WAAAA,aAAA;QAAA;UAAA,OAAAjE,OAAA,CAAA6D,OAAA,CACQ9D,CAAA,IAAA+D,IAAA;QAAA,CADI,QAAA3F,CAAA;UAAA,OAAA6B,OAAA,CAAA+D,MAAA,CAAA5F,CAAA;QAAA;MAAA;MAGZ+F,aAAA,WAAAA,cAAA;QAAA;UAAA,OAAAlE,OAAA,CAAA6D,OAAA,CACQ9D,CAAA,IAAA+D,IAAA;QAAA,CADK,QAAA3F,CAAA;UAAA,OAAA6B,OAAA,CAAA+D,MAAA,CAAA5F,CAAA;QAAA;MAAA;MAGbsF,SAAA,WAAAA,UAAA;QAAA;UAAA,OAAAzD,OAAA,CAAA6D,OAAA,CACQ9D,CAAA,IAAA+D,IAAA;QAAA,CADC,QAAA3F,CAAA;UAAA,OAAA6B,OAAA,CAAA+D,MAAA,CAAA5F,CAAA;QAAA;MAAA;MAGTqF,SAAA,WAAAA,UAAA;QAAA;UAAA,OAAAxD,OAAA,CAAA6D,OAAA,CACQ9D,CAAA,IAAA+D,IAAA;QAAA,CADC,QAAA3F,CAAA;UAAA,OAAA6B,OAAA,CAAA+D,MAAA,CAAA5F,CAAA;QAAA;MAAA;MAGTgG,UAAA,WAAAA,WAAA;QAAA;UAAA,OAAAnE,OAAA,CAAA6D,OAAA,CACQ9D,CAAA,IAAA+D,IAAA;QAAA,CADE,QAAA3F,CAAA;UAAA,OAAA6B,OAAA,CAAA+D,MAAA,CAAA5F,CAAA;QAAA;MAAA;MAGViG,WAAA,WAAAA,YAAA;QAAA;UAAA,OAAApE,OAAA,CAAA6D,OAAA,CACQ9D,CAAA,IAAA+D,IAAA;QAAA,CADG,QAAA3F,CAAA;UAAA,OAAA6B,OAAA,CAAA+D,MAAA,CAAA5F,CAAA;QAAA;MAAA;MAGXkG,oBAAA,WAAAA,qBAA6BlG,CAAA,EAASC,CAAA;QAAA;UAAA,OAAA4B,OAAA,CAAA6D,OAAA,CAG9B9D,CAAA,IAAA+D,IAAA;QAAA,CAHY,QAAA3F,CAAA;UAAA,OAAA6B,OAAA,CAAA+D,MAAA,CAAA5F,CAAA;QAAA;MAAA;MAMpBmG,QAAA,WAAAA,SAAiBnG,CAAA,EAASC,CAAA;QAAA;UAAA,OAAA4B,OAAA,CAAA6D,OAAA,CAGlB9D,CAAA,IAAA+D,IAAA;QAAA,CAHA,QAAA3F,CAAA;UAAA,OAAA6B,OAAA,CAAA+D,MAAA,CAAA5F,CAAA;QAAA;MAAA;MAMRoG,UAAA,WAAAA,WAAmBpG,CAAA,EAASC,CAAA;QAAA;UAAA,OAAA4B,OAAA,CAAA6D,OAAA,CAGpB9D,CAAA,IAAA+D,IAAA;QAAA,CAHE,QAAA3F,CAAA;UAAA,OAAA6B,OAAA,CAAA+D,MAAA,CAAA5F,CAAA;QAAA;MAAA;MAMVqG,YAAA,WAAAA,aAAqBrG,CAAA,EAASC,CAAA;QAAA;UAAA,OAAA4B,OAAA,CAAA6D,OAAA,CAGtB9D,CAAA,IAAA+D,IAAA;QAAA,CAHI,QAAA3F,CAAA;UAAA,OAAA6B,OAAA,CAAA+D,MAAA,CAAA5F,CAAA;QAAA;MAAA;MAMZsG,eAAA,WAAAA,gBAAwBtG,CAAA,EAASC,CAAA;QAAA;UAAA,OAAA4B,OAAA,CAAA6D,OAAA,CAGzB9D,CAAA,IAAA+D,IAAA;QAAA,CAHO,QAAA3F,CAAA;UAAA,OAAA6B,OAAA,CAAA+D,MAAA,CAAA5F,CAAA;QAAA;MAAA;MAMfuG,YAAA,WAAAA,aAAqBvG,CAAA,EAASC,CAAA;QAAA;UAAA,OAAA4B,OAAA,CAAA6D,OAAA,CAGtB9D,CAAA,IAAA+D,IAAA;QAAA,CAHI,QAAA3F,CAAA;UAAA,OAAA6B,OAAA,CAAA+D,MAAA,CAAA5F,CAAA;QAAA;MAAA;MAMZwG,cAAA,WAAAA,eAAuBxG,CAAA,EAASC,CAAA;QAAA;UAAA,OAAA4B,OAAA,CAAA6D,OAAA,CAGxB9D,CAAA,IAAA+D,IAAA;QAAA,CAHM,QAAA3F,CAAA;UAAA,OAAA6B,OAAA,CAAA+D,MAAA,CAAA5F,CAAA;QAAA;MAAA;MAMdyG,aAAA,WAAAA,cAAsBzG,CAAA,EAASC,CAAA;QAAA;UAAA,OAAA4B,OAAA,CAAA6D,OAAA,CAGvB9D,CAAA,IAAA+D,IAAA;QAAA,CAHK,QAAA3F,CAAA;UAAA,OAAA6B,OAAA,CAAA+D,MAAA,CAAA5F,CAAA;QAAA;MAAA;IAAA;IAOf0G,MAAA,EAAQ;MAAEC,eAAA,EApRU,SAAAA,gBAAA3G,CAAA;QAAA,OAAuC,aAAAA,CAAA,CAApC0C,YAAA;MAAA;MAoRIkE,aAAA,EArRT,SAAAA,cAAA5G,CAAA;QAAA,OAAuC,WAAAA,CAAA,CAApC0C,YAAA;MAAA;IAAA;EAAA;EAAAmE,CAAA;EAAAC,CAAA;EAAAC,CAAA;EAAAC,CAAA,GC3EKC,CAAA,CAAOC,OAAA;EAA7BC,CAAA,GAAAH,CAAA,CAAAI,OAAA;EAASC,CAAA,GAAAL,CAAA,CAAAM,QAAA;EAKJC,CAAA,GAActH,CAAA,CAAMuH,UAAA,CAM/B,UAAAxH,CAAA,EAyBAH,CAAA;IAAA,IAvBEqB,CAAA,GAAAlB,CAAA,CAAAyH,QAAA;MACAR,CAAA,GAAAjH,CAAA,CAAA0H,OAAA;MACAjG,CAAA,GAAAzB,CAAA,CAAA2H,SAAA;MACArF,CAAA,GAAAtC,CAAA,CAAA4H,MAAA;MACAvD,CAAA,GAAArE,CAAA,CAAA6H,MAAA;MACMpH,CAAA,GAAAT,CAAA,CAANyD,IAAA;MACA7B,CAAA,GAAA5B,CAAA,CAAA0C,YAAA;MACAX,CAAA,GAAA/B,CAAA,CAAA8H,WAAA;MACA3F,CAAA,GAAAnC,CAAA,CAAA+H,eAAA;MACAf,CAAA,GAAAhH,CAAA,CAAAgI,SAAA;MACWT,CAAA,GAAAvH,CAAA,CAAXiI,SAAA;MAAAC,CAAA,GAAAlI,CAAA,CACAmI,WAAA;MAAaC,CAAA,cAAAF,CAAA,GAAiBG,CAAA,GAAAH,CAAA;MAAAI,CAAA,GAAAtI,CAAA,CAC9BuI,UAAA;MAAYC,CAAA,cAAAF,CAAA,GAAgBG,CAAA,GAAAH,CAAA;MAAAI,CAAA,GAAA1I,CAAA,CAC5B2I,QAAA;MAAAC,CAAA,cAAAF,CAAA,IAAAA,CAAA;MAAAG,CAAA,GAAA7I,CAAA,CACA8I,aAAA;MAAAC,CAAA,cAAAF,CAAA,IAAAA,CAAA;MACAG,CAAA,GAAAhJ,CAAA,CAAAiJ,KAAA;MACAC,EAAA,GAAAlJ,CAAA,CAAAmJ,aAAA;MACAC,EAAA,GAAApJ,CAAA,CAAAqJ,cAAA;MACAC,EAAA,GAAAtJ,CAAA,CAAAuJ,WAAA;MAAAC,EAAA,GAAAxJ,CAAA,CACAyJ,mBAAA;MAAAC,EAAA,cAAAF,EAAA,GAAsBZ,CAAA,GAAAY,EAAA;MAAAG,EAAA,GAAA3J,CAAA,CACtB4J,mBAAA;MAAAC,EAAA,cAAAF,EAAA,IAAAA,EAAA;MACGG,EAAA,GAAAC,CAAA,CAAA/J,CAAA,EAAA6G,CAAA;MAAAmD,EAAA;QClEL,IAAAhK,CAAA,GAA0BgB,CAAA,EAAS;UAA5Bf,CAAA,GAAAD,CAAA;UAAOE,CAAA,GAAAF,CAAA;UAAAmB,CAAA,GACqBH,CAAA,CAAqC;UAAjEnB,CAAA,GAAAsB,CAAA;UAAUJ,CAAA,GAAAI,CAAA;UAEXF,CAAA,GAAgBI,CAAA,CAAY,UAACrB,CAAA;YAKjC,OAFAe,CAAA,CAAe,UAACd,CAAA;cAAA,IAAAC,CAAA;cAAA,OAAAyD,CAAA,KAAgB1D,CAAA,IAAAC,CAAA,OAAQF,CAAA,KAAM,GAAAE,CAAA;YAAA;cAK5Ca,CAAA,CAAe,UAACd,CAAA;gBAAA,IAAAC,CAAA;gBAAA,OAAAyD,CAAA,KAAgB1D,CAAA,IAAAC,CAAA,OAAQF,CAAA,KAAM,GAAAE,CAAA;cAAA;YAAA;UAAA,GAE/C;QAkBH,OAhBAJ,CAAA,CAAU;UACR,IAAME,CAAA,GAASiK,MAAA,CAAOC,MAAA,CAAOrK,CAAA;UAEP,MAAlBG,CAAA,CAAOmK,MAAA,IAKKnK,CAAA,CAAOoK,KAAA,CAAMC,OAAA,KAI3BnK,CAAA,EAAS;QAAA,GAEV,CAACL,CAAA,IAEG;UAAEyK,KAAA,EAAArK,CAAA;UAAOsK,aAAA,EAAAtJ;QAAA;MAAA,CDyCiB;MAAzBuJ,EAAA,GAAAR,EAAA,CAAAM,KAAA;MAAOG,EAAA,GAAAT,EAAA,CAAAO,aAAA;MAGTG,EAAA,GAAaxK,CAAA,EAAO;MAGpByK,EAAA,GAAmBzK,CAAA,CAAOgJ,EAAA;MAC1B0B,EAAA,GAAoB1K,CAAA,CAAOkJ,EAAA;MAC3ByB,EAAA,GAAiB3K,CAAA,CAAOoJ,EAAA;IAC9BxJ,CAAA,CAAU;MACR6K,EAAA,CAAiBnJ,OAAA,GAAU0H,EAAA,EAC3B0B,EAAA,CAAkBpJ,OAAA,GAAU4H,EAAA,EAC5ByB,EAAA,CAAerJ,OAAA,GAAU8H,EAAA;IAAA,GACxB,CAACF,EAAA,EAAgBF,EAAA,EAAeI,EAAA;IAGnC,IEzFMwB,EAAA;MAOAC,EAAA;MAAAC,EAAA,GCLCC,CAAA,CAAe;QAAA,OAAO;UAC3B3G,CAAA,EAAG;UACHgG,KAAA,EAAO;UACPrC,SAAA,EAAW;UACXiD,OAAA,EAAS;UACTC,OAAA,EAAS;QAAA;MAAA;MHkFJC,EAAA,GAAAJ,EAAA;MAAQK,EAAA,GAAAL,EAAA;MAETM,EAAA,GAAepL,CAAA,CAAuB;MACtCqL,EAAA,GAAYrL,CAAA,CAAuB;MACnCsL,EAAA,GAAatL,CAAA,CAAuB;MACpCuL,EAAA,GAAYvL,CAAA,CAAuB;MACnCwL,EAAA,GAAYxL,CAAA,CAAuB;MACnCyL,EAAA,GAAazL,CAAA,CAA8B;MAG3C0L,EAAA,GAAY1L,CAAA,CAAO;MACnB2L,EAAA,GAAkB3L,CAAA;MAClB4L,EAAA,GAAsB5L,CAAA,EAAO;MAE7B6L,EAAA,IEvGAjB,EAAA,GAAM/J,CAAA,CACV;QAAA,OACoB,sBAAXnB,MAAA,GACHA,MAAA,CAAOoM,UAAA,CAAW,sCAClB;MAAA,GACN,KAEIjB,EAAA,GAAM7K,CAAA,SAAO4K,EAAA,YAAAA,EAAA,CAAKmB,OAAA,GAExB9K,CAAA,CAAc4J,EAAA,CAAIvJ,OAAA,GAAU,WAAW,kBAEvC1B,CAAA,CAAU;QACR,IAAME,CAAA,GAAU,SAAAA,EAACA,EAAA;UACf+K,EAAA,CAAIvJ,OAAA,GAAUxB,EAAA,CAAMiM,OAAA;QAAA;QAItB,eAFAnB,EAAA,IAAAA,EAAA,CAAKoB,WAAA,CAAYlM,CAAA;UAAA,eAEJ8K,EAAA,YAAAA,EAAA,CAAKqB,cAAA,CAAenM,CAAA;QAAA;MAAA,GAChC,CAAC8K,EAAA,IAEGC,EAAA;MFsFDqB,EAAA,aAAApM,CAAA;QAAA,II/FNC,CAAA,GAAAD,CAAA,CAAAqM,SAAA;UACAxM,CAAA,GAAAG,CAAA,CAAAa,OAAA;UACAG,CAAA,GAAAhB,CAAA,CAAAyJ,mBAAA;UAMMpI,CAAA,GAAMnB,CAAA,CAAyD;YACnEiG,QAAA,EAAU,SAAAA,SAAA;cACR,UAAU3F,SAAA,CAAU;YAAA;YAEtB4F,UAAA,EAAY,SAAAA,WAAA;UAAA;QAgCd,OA7BAjF,CAAA,CAActB,CAAA,GAAU,YAAY,aAEpCC,CAAA,CAAU;UACR,KAAKD,CAAA,EAGH,OAFAwB,CAAA,CAAIG,OAAA,CAAQ4E,UAAA,UACZ/E,CAAA,CAAIG,OAAA,GAAU;YAAE2E,QAAA,EAAU,SAAAA,SAAA;YAAUC,UAAA,EAAY,SAAAA,WAAA;UAAA;UAIlD,IAAMpG,CAAA,GAASC,CAAA,CAAUuB,OAAA;YACrBtB,CAAA,IAAS;UAEbmB,CAAA,CAAIG,OAAA,GAAU;YACZ2E,QAAA,EAAU,SAAAA,SAAA;cACJjG,CAAA,KACJA,CAAA,IAAS,GACToM,CAAA,CAAkBtM,CAAA,EAAQ;gBACxBuM,cAAA,EAAgB,SAAAA,eAACvM,CAAA;kBAAA,OAAOA,CAAA,CAAGwM,OAAA,CAAQ;gBAAA;gBACnC/C,mBAAA,EAAAzI;cAAA;YAAA;YAGJoF,UAAA,EAAY,SAAAA,WAAA;cACLlG,CAAA,KACLA,CAAA,IAAS,GACTuM,CAAA,CAAiBzM,CAAA;YAAA;UAAA;QAAA,GAGpB,CAACH,CAAA,EAASI,CAAA,EAAWe,CAAA,IAEjBK,CAAA;MAAA,CJmDe,CAAc;QAClCgL,SAAA,EAAWd,EAAA;QACX1K,OAAA,EAAS2J,EAAA,IAASzB,CAAA;QAClBU,mBAAA,EAAAC;MAAA;MAEIgD,EAAA,aAAA1M,CAAA;QAAA,IK/GNC,CAAA,GAAAD,CAAA,CAAAqM,SAAA;UACAxM,CAAA,GAAAG,CAAA,CAAAa,OAAA;UAKMG,CAAA,GAAMd,CAAA,CAAyD;YACnEiG,QAAA,EAAU,SAAAA,SAAA;cACR,UAAU3F,SAAA,CAAU;YAAA;YAEtB4F,UAAA,EAAY,SAAAA,WAAA;UAAA;QAwDd,OArDAjF,CAAA,CAActB,CAAA,GAAU,YAAY,aAEpCC,CAAA,CAAU;UACR,KAAKD,CAAA,EAGH,OAFAmB,CAAA,CAAIQ,OAAA,CAAQ4E,UAAA,UACZpF,CAAA,CAAIQ,OAAA,GAAU;YAAE2E,QAAA,EAAU,SAAAA,SAAA;YAAUC,UAAA,EAAY,SAAAA,WAAA;UAAA;UAIlD,IAAMpG,CAAA,GAASC,CAAA,CAAUuB,OAAA;YACrBtB,CAAA,IAAS;YACTiB,CAAA,GAAoC;YACpCrB,CAAA,GAAuB;UAE3BkB,CAAA,CAAIQ,OAAA,GAAU;YACZ2E,QAAA,EAAU,SAAAA,SAAA;cACR,KAAIjG,CAAA,EAAJ;gBACAA,CAAA,IAAS;gBAET,IAAMD,CAAA,GAAaD,CAAA,CAAO2M,UAAA;gBAE1BC,QAAA,CAASC,gBAAA,CAAiB,YAAYC,OAAA,CAAQ,UAAC9M,CAAA;kBAC7C,IAAIA,CAAA,KAASC,CAAA,EAAb;oBAGA,IAAIC,CAAA,GAAOF,CAAA,CAAK+M,YAAA,CAAa;oBACA,SAAT7M,CAAA,IAA0B,YAATA,CAAA,KAIrCiB,CAAA,CAAe6L,IAAA,CAAK9M,CAAA,GACpBJ,CAAA,CAAUkN,IAAA,CAAKhN,CAAA,GACfA,CAAA,CAAKiN,YAAA,CAAa,eAAe;kBAAA;gBAAA;cAAA;YAAA;YAGrC7G,UAAA,EAAY,SAAAA,WAAA;cACLlG,CAAA,KACLA,CAAA,IAAS,GAETJ,CAAA,CAAUgN,OAAA,CAAQ,UAAC9M,CAAA,EAAMC,CAAA;gBACvB,IAAIC,CAAA,GAAgBiB,CAAA,CAAelB,CAAA;gBACb,SAAlBC,CAAA,GACFF,CAAA,CAAKkN,eAAA,CAAgB,iBAErBlN,CAAA,CAAKiN,YAAA,CAAa,eAAe/M,CAAA;cAAA,IAGrCiB,CAAA,GAAiB,IACjBrB,CAAA,GAAY;YAAA;UAAA;QAAA,GAGf,CAACG,CAAA,EAAWJ,CAAA,IAERmB,CAAA;MAAA,CL6Cc,CAAa;QAChCqL,SAAA,EAAWf,EAAA;QACXzK,OAAA,EAAS2J,EAAA,IAAS5B;MAAA;MAEduE,EAAA,aAAAnN,CAAA;QAAA,IMnHNC,CAAA,GAAAD,CAAA,CAAAqM,SAAA;UACAxM,CAAA,GAAAG,CAAA,CAAAoN,WAAA;UACApM,CAAA,GAAAhB,CAAA,CAAA+H,eAAA;UACA1G,CAAA,GAAArB,CAAA,CAAAa,OAAA;UAOME,CAAA,GAAMb,CAAA,CAAyD;YACnEiG,QAAA,EAAU,SAAAA,SAAA;cACR,UAAU3F,SAAA,CAAU;YAAA;YAEtB4F,UAAA,EAAY,SAAAA,WAAA;UAAA;QAiDd,OA9CAjF,CAAA,CAAcE,CAAA,GAAU,YAAY,aAEpCvB,CAAA,CAAU;UACR,KAAKuB,CAAA,EAGH,OAFAN,CAAA,CAAIS,OAAA,CAAQ4E,UAAA,UACZrF,CAAA,CAAIS,OAAA,GAAU;YAAE2E,QAAA,EAAU,SAAAA,SAAA;YAAUC,UAAA,EAAY,SAAAA,WAAA;UAAA;UAIlD,IAAMpG,CAAA,GAAWH,CAAA,CAAY2B,OAAA;YACvBtB,CAAA,GAAOmN,CAAA,CAAgBpN,CAAA,CAAUuB,OAAA,EAAS;cAC9C8L,UAAA,OAKM;cAENC,YAAA,EAAcvM,CAAA,GACV;gBAAA,gBAAMA,CAAA,YAAAA,CAAA,CAAiBQ,OAAA,KAAWxB,CAAA;cAAA,SAClC;cACJwN,aAAA,EAAexN,CAAA;cACfyN,iBAAA,GAAmB;cACnBC,uBAAA,GAAyB;YAAA;YAEvBvM,CAAA,IAAS;UAEbJ,CAAA,CAAIS,OAAA,GAAU;YACZ2E,QAAA,WAAAA,SAAA;cAAA;gBACE,OAAIhF,CAAA,GAAAU,OAAA,CAAA6D,OAAA,MACJvE,CAAA,IAAS,GAAAU,OAAA,CAAA6D,OAAA,CAEHxF,CAAA,CAAKiG,QAAA,IAAAR,IAAA;kBAAA,OAAA9D,OAAA,CAAA6D,OAAA,CAGL,IAAI7D,OAAA,CAAQ,UAAC7B,CAAA;oBAAA,OAAY8B,UAAA,CAAW;sBAAA,OAAM9B,CAAA,MAAQ;oBAAA,GAAS;kBAAA,IAAA2F,IAAA;gBAAA;cAAA,CAP3D,QAAA3F,CAAA;gBAAA,OAAA6B,OAAA,CAAA+D,MAAA,CAAA5F,CAAA;cAAA;YAAA;YASRoG,UAAA,EAAY,SAAAA,WAAA;cACLjF,CAAA,KACLA,CAAA,IAAS,GAETjB,CAAA,CAAKkG,UAAA;YAAA;UAAA;QAAA,GAGR,CAAC/E,CAAA,EAASxB,CAAA,EAAamB,CAAA,EAAiBf,CAAA,IAEpCc,CAAA;MAAA,CNoDc,CAAa;QAChCsL,SAAA,EAAWf,EAAA;QACX8B,WAAA,EAAazB,EAAA;QACb5D,eAAA,EAAiB5F,CAAA,SAAmB;QACpCtB,OAAA,EAAS2J,EAAA,IAAS5B,CAAA,KAAgC,MAApBzG;MAAA;MAAAwL,EAAA,aAAA3N,CAAA;QAAA,IFvGhCC,CAAA,GAAAD,CAAA,CAAA4N,aAAA;UAGA/N,CAAA,GAAAG,CAAA,CAAA6N,SAAA;UACAxM,CAAA,GAAArB,CAAA,CAAA8H,WAAA;UACA7G,CAAA,GAAAjB,CAAA,CAAAsK,KAAA;UAAApJ,CAAA,GAyEF,UAAAlB,CAAA;YAAA,IACEC,CAAA,GAAAD,CAAA,CAAA8N,UAAA;cACAjO,CAAA,GAAAG,CAAA,CAAA+N,mBAAA;cACA1M,CAAA,GAAArB,CAAA,CAAAgO,aAAA;cACA/M,CAAA,GAAAjB,CAAA,CAAAiO,SAAA;cACA/M,CAAA,GAAAlB,CAAA,CAAAkO,aAAA;cACA9M,CAAA,GAAApB,CAAA,CAAAmO,SAAA;cACAlD,CAAA,GAAAjL,CAAA,CAAAuK,aAAA;cACA6D,CAAA,GAAApO,CAAA,CAAAc,eAAA;cAWMuN,CAAA,GAAWtN,CAAA,CAAQ;gBAAA,OAAMkK,CAAA,CAAc;cAAA,GAAkB,CAC7DA,CAAA;cAEIhE,CAAA,GAgGR,UACEjH,CAAA,EACAC,CAAA,EACAJ,CAAA;gBAEA,IAAMwB,CAAA,GAAWN,CAAA,CAAQ;oBAAA,OAAMd,CAAA,CAAc;kBAAA,GAAc,CAACA,CAAA;kBAAAgB,CAAA,GAC1BD,CAAA,CAAS;oBAAA,OACzCb,CAAA,CAAoBH,CAAA,KAA0C,sBAAXJ,MAAA,GAC/CA,MAAA,CAAO0O,WAAA,GACP;kBAAA;kBAHCpN,CAAA,GAAAD,CAAA;kBAAWG,CAAA,GAAAH,CAAA;kBAKZgK,CAAA,GAAQ/J,CAAA,GAAY;kBACpBkN,CAAA,GAAMlO,CAAA,CAAO;gBA4CnB,OA1CAiB,CAAA,CAAcnB,CAAA,GAAsB,eAAe,SAEnDF,CAAA,CAAU;kBACJmL,CAAA,IACF5J,CAAA;gBAAA,GAED,CAAC4J,CAAA,EAAO5J,CAAA,IAEX1B,CAAA,CAAgB;kBAEd,IAAIK,CAAA,EAIF,OAHAoB,CAAA,CAAajB,CAAA,CAAoBH,CAAA,UACjCH,CAAA,CAAgB2B,OAAA,GAAU;kBAK5B,IAAMvB,CAAA,GAAe,SAAfA,EAAA,EAAe;oBACfmO,CAAA,CAAI5M,OAAA,KAMR4M,CAAA,CAAI5M,OAAA,GAAU+M,qBAAA,CAAsB;sBAClCnN,CAAA,CAAaxB,MAAA,CAAO0O,WAAA,GACpBzO,CAAA,CAAgB2B,OAAA,GAAU,UAE1B4M,CAAA,CAAI5M,OAAA,GAAU;oBAAA;kBAAA;kBAQlB,OALA5B,MAAA,CAAO4O,gBAAA,CAAiB,UAAUvO,CAAA,GAClCmB,CAAA,CAAaxB,MAAA,CAAO0O,WAAA,GACpBzO,CAAA,CAAgB2B,OAAA,GAAU,UAC1BH,CAAA;oBAGEzB,MAAA,CAAO6O,mBAAA,CAAoB,UAAUxO,CAAA,GACrCyO,oBAAA,CAAqBN,CAAA,CAAI5M,OAAA;kBAAA;gBAAA,GAE1B,CAACxB,CAAA,EAAqBqB,CAAA,EAAUxB,CAAA,IAE5BqB,CAAA;cAAA,CAxJW,CAChBrB,CAAA,EACAoL,CAAA,EACAmD,CAAA;cAII9J,CAAA,GAAe3D,CAAA,CAAuBS,CAAA,EAAW;gBACrDR,KAAA,EAAO;gBACPC,OAAA,EAASK,CAAA;gBACTJ,eAAA,EAAAsN;cAAA;cAEIO,CAAA,GAAgBhO,CAAA,CAAuBV,CAAA,EAAY;gBACvDW,KAAA,EAAO;gBACPC,OAAA,GAAS;gBACTC,eAAA,EAAAsN;cAAA;cAEIf,CAAA,GAAe1M,CAAA,CAAuBM,CAAA,EAAW;gBACrDL,KAAA,EAAO;gBACPC,OAAA,EAASQ,CAAA;gBACTP,eAAA,EAAAsN;cAAA;cAEI9B,CAAA,GACJlM,IAAA,CAAKwO,GAAA,CAAI3H,CAAA,GAAY3C,CAAA,GAAe+I,CAAA,EAAcsB,CAAA,IAClDrK,CAAA,GACA+I,CAAA;YAEFlM,CAAA,iBAA4BmL,CAAA;YAE5B,IAAMG,CAAA,GAAQkC,CAAA,GAAgB;YAO9B,OANA7O,CAAA,CAAU;cACJ2M,CAAA,IACF4B,CAAA;YAAA,GAED,CAAC5B,CAAA,EAAO4B,CAAA,IAEJ;cACLpG,SAAA,EAAAhB,CAAA;cACA4H,SAAA,EAAAvC,CAAA;cACAwC,YAAA,EAAAxK,CAAA;cACAyK,YAAA,EAAA1B;YAAA;UAAA,CAtH2D,CAAc;YACzES,UAAA,EAAA9N,CAAA,CA3BF8N,UAAA;YA4BEC,mBAAA,EAAA/N,CAAA,CA3BF+N,mBAAA;YA4BEC,aAAA,EAAAhO,CAAA,CA3BFgO,aAAA;YA4BEC,SAAA,EAAAjO,CAAA,CA3BFiO,SAAA;YA4BEC,aAAA,EAAAlO,CAAA,CA1BFkO,aAAA;YA2BEC,SAAA,EAAAnO,CAAA,CA1BFmO,SAAA;YA2BE5D,aAAA,EAAAvK,CAAA,CAvBFuK,aAAA;YAwBEzJ,eAAA,EAAAd,CAAA,CAvBFc;UAAA;UAeQM,CAAA,GAAAF,CAAA,CAAA+G,SAAA;UAAWgD,CAAA,GAAA/J,CAAA,CAAA2N,SAAA;UAAWT,CAAA,GAAAlN,CAAA,CAAA4N,YAAA;UAAcT,CAAA,GAAAnN,CAAA,CAAA6N,YAAA;UAAA9H,CAAA,aDPZjH,CAAA,EAAgCC,CAAA;YAChE,IAEMC,CAAA,GAFY,GAAG8O,MAAA,CAAOhP,CAAA,EAAaiP,GAAA,CAAI9O,CAAA,EAEN+O,MAAA,CAAO,UAAClP,CAAA,EAAKE,CAAA;gBAElD,OADAF,CAAA,CAAImP,GAAA,CAAIpP,CAAA,CAAMG,CAAA,EAAW,GAAGD,CAAA,IACrBD,CAAA;cAAA,GACN,IAAIoP,GAAA;cAEDjO,CAAA,GAAakO,KAAA,CAAMC,IAAA,CAAKpP,CAAA;cAExBJ,CAAA,GAAUM,IAAA,CAAKwO,GAAA,CAAAW,KAAA,CAALnP,IAAA,EAAYe,CAAA;YAC5B,IAAIb,MAAA,CAAOC,KAAA,CAAMT,CAAA,GACf,UAAUU,SAAA,CAAU;YAEtB,IAAMX,CAAA,GAAUO,IAAA,CAAKoP,GAAA,CAAAD,KAAA,CAALnP,IAAA,EAAYe,CAAA;YAC5B,IAAIb,MAAA,CAAOC,KAAA,CAAMV,CAAA,GACf,UAAUW,SAAA,CAAU;YAGtB,OAAO;cACL+H,UAAA,EAAApH,CAAA;cACA+J,OAAA,EAAApL,CAAA;cACAqL,OAAA,EAAAtL;YAAA;UAAA,CCJuC,CACvCoB,CAAA,GACIhB,CAAA,CAAc;YACZwP,MAAA,EAAQ5P,CAAA,CAAU2B,OAAA;YAClBuN,YAAA,EAAAV,CAAA;YACAS,YAAA,EAAAV,CAAA;YACAS,SAAA,EAAA5D,CAAA;YACAhD,SAAA,EAAA7G;UAAA,KAEF,CAAC,IACLA,CAAA;UAVMkD,CAAA,GAAA2C,CAAA,CAAAsB,UAAA;UAAYoG,CAAA,GAAA1H,CAAA,CAAAiE,OAAA;UAASmC,CAAA,GAAApG,CAAA,CAAAkE,OAAA;QA0C7B,OAFAhK,CAAA,eAA0BwN,CAAA,kBAAoBtB,CAAA,GAEvC;UAAEnC,OAAA,EAAAyD,CAAA;UAASxD,OAAA,EAAAkC,CAAA;UAASqC,QAAA,EA3B3B,SAAAA,SACE1P,CAAA;YAEA,IAcMC,CAAA,GAAYE,CAAA,CAbc,qBAArBH,CAAA,GACMA,CAAA,CAAiB;cAC9B+O,YAAA,EAAAV,CAAA;cACAS,YAAA,EAAAV,CAAA;cACAqB,MAAA,EAAQ5P,CAAA,CAAU2B,OAAA;cAClBqN,SAAA,EAAA5D,CAAA;cACAhD,SAAA,EAAA7G,CAAA;cACAmH,UAAA,EAAAjE,CAAA;cACAqL,QAAA,EAAUtO,CAAA,CAAYG;YAAA,KAGTxB,CAAA;YAGjB,OAAOsE,CAAA,CAAW4K,MAAA,CAChB,UAAClP,CAAA,EAAME,CAAA;cAAA,OACLE,IAAA,CAAKwP,GAAA,CAAI1P,CAAA,GAAOD,CAAA,IAAaG,IAAA,CAAKwP,GAAA,CAAI5P,CAAA,GAAOC,CAAA,IAAaC,CAAA,GAAOF,CAAA;YAAA,GACnE2O,CAAA;UAAA;UAMiC1G,SAAA,EAAA7G;QAAA;MAAA,CE+Ba,CAAc;QAC9D0M,UAAA,EAAAtC,EAAA;QACAuC,mBAAA,EAAAxG,CAAA;QACAyG,aAAA,IAAiB1L,CAAA;QACjB2L,SAAA,EAAAvC,EAAA;QACAkC,aAAA,EAAApF,CAAA;QACA0F,aAAA,GAA0B,MAAX7J,CAAA;QACf8J,SAAA,EAAA1C,EAAA;QACAoC,SAAA,EAAAjC,EAAA;QACA9D,WAAA,EAAA/F,CAAA;QACAuI,KAAA,EAAAE,EAAA;QACAD,aAAA,EAAAE,EAAA;QACA3J,eAAA,EAAA+K;MAAA;MAZMgE,EAAA,GAAAlC,EAAA,CAAAzC,OAAA;MAAS4E,EAAA,GAAAnC,EAAA,CAAAxC,OAAA;MAAS4E,EAAA,GAAApC,EAAA,CAAA1F,SAAA;MAAW+H,EAAA,GAAArC,EAAA,CAAA+B,QAAA;MAgB/BO,EAAA,GAAe/P,CAAA,CAAO6P,EAAA;MACtBG,EAAA,GAAahQ,CAAA,CAAO2P,EAAA;MACpBM,EAAA,GAAajQ,CAAA,CAAO4P,EAAA;MACpBM,EAAA,GAAclQ,CAAA,CAAO8P,EAAA;MACrBK,EAAA,GAAiBnQ,CAAA,CAAO;IAE9BP,CAAA,CAAgB;MACdsQ,EAAA,CAAazO,OAAA,GAAUuO,EAAA,EACvBI,EAAA,CAAW3O,OAAA,GAAUsO,EAAA,EACrBI,EAAA,CAAW1O,OAAA,GAAUqO,EAAA,EACrBO,EAAA,CAAY5O,OAAA,GAAUwO,EAAA,EACtBK,EAAA,CAAe7O,OAAA,GAAUwO,EAAA,CAAS5H,CAAA;IAAA,GACjC,CAAC4H,EAAA,EAAU5H,CAAA,EAAgB2H,EAAA,EAAWD,EAAA,EAASD,EAAA;IAGlD,IAAMS,EAAA,GAAWjP,CAAA,CAEf,UAAArB,CAAA;QAAA,IAAGC,CAAA,GAAAD,CAAA,CAAAuQ,MAAA;UAAArQ,CAAA,GAAAF,CAAA,CAAQwQ,MAAA;UAAArP,CAAA,IAAAjB,CAAA,cAAAA,CAAA,GAAsC,KAAAA,CAAA,EAA5BsE,QAAA;UAAA1E,CAAA,cAAAqB,CAAA,GAAW,IAAAA,CAAA;UAAMtB,CAAA,GAAAkK,CAAA,CAAA7J,CAAA,EAAA4G,CAAA;UAAkB9F,CAAA,GAAA+I,CAAA,CAAA/J,CAAA,EAAA+G,CAAA;QAAA,WAClDlF,OAAA,CAAQ,UAAC7B,CAAA;UAAA,OACXqL,EAAA,CAAA1H,CAAA,KACK3C,CAAA;YACHwP,MAAA,EAAA7M,CAAA;cACEa,QAAA,EAAA1E;YAAA,GACGD,CAAA;cAEH4Q,IAAA,EAAM;cAENrJ,OAAA,EAAAD,CAAA;cAEAG,QAAA,EAAUlH,IAAA,CAAKoP,GAAA,CACbnI,CAAA,EACAA,CAAA,IAAYA,CAAA,GAAWA,CAAA,GAAWvH,CAAA;YAAA;YAGtCyQ,MAAA,EAAQ,SAAAA,OAAA;cAAA,IAAIrQ,CAAA,MAAAwQ,KAAA,CAAAC,IAAA,CAAAC,SAAA;cACV5Q,CAAA,CAAAuP,KAAA,SAAWrP,CAAA,WACXD,CAAA,IAAAA,CAAA,CAAAsP,KAAA,SAAYrP,CAAA;YAAA;UAAA;QAAA;MAAA,GAIpB,CAACmL,EAAA;MAAAwF,EAAA,GAEqBzP,CAAA,CAAWiB,CAAA,EAAgB;QACjDyO,QAAA,GHzHE;QG0HF5O,OAAA,EAAS;UACP+C,YAAA,EAAc5D,CAAA,CACZ;YAAA,eAAMuJ,EAAA,CAAkBpJ,OAAA,YAAlBoJ,EAAA,CAAkBpJ,OAAA,CAAU;cAAEwC,IAAA,EAAM;YAAA;UAAA,GAC1C;UAEFkB,YAAA,EAAc7D,CAAA,CACZ,UAACrB,CAAA;YAAA,eACC4K,EAAA,CAAkBpJ,OAAA,YAAlBoJ,EAAA,CAAkBpJ,OAAA,CAAU;cAC1BwC,IAAA,EAAM;cACNU,MAAA,EAAQ1E,CAAA,CAAQyE;YAAA;UAAA,GAEpB;UAEFW,aAAA,EAAe/D,CAAA,CACb;YAAA,eAAMuJ,EAAA,CAAkBpJ,OAAA,YAAlBoJ,EAAA,CAAkBpJ,OAAA,CAAU;cAAEwC,IAAA,EAAM;YAAA;UAAA,GAC1C;UAEFmB,cAAA,EAAgB9D,CAAA,CACd;YAAA,eACEuJ,EAAA,CAAkBpJ,OAAA,YAAlBoJ,EAAA,CAAkBpJ,OAAA,CAAU;cAC1BwC,IAAA,EAAM;cACNU,MAAA,EAAQmH,EAAA,CAAgBrK;YAAA;UAAA,GAE5B;UAEF6D,SAAA,EAAWhE,CAAA,CACT;YAAA,eAAMwJ,EAAA,CAAerJ,OAAA,YAAfqJ,EAAA,CAAerJ,OAAA,CAAU;cAAEwC,IAAA,EAAM;YAAA;UAAA,GACvC;UAEFsB,SAAA,EAAWjE,CAAA,CACT,UAACrB,CAAA,EAASC,CAAA;YAAA,eACR4K,EAAA,CAAerJ,OAAA,YAAfqJ,EAAA,CAAerJ,OAAA,CAAU;cACvBwC,IAAA,EAAM;cACNU,MAAA,EAAQ1E,CAAA,CAAQyE;YAAA;UAAA,GAEpB;UAEFwB,WAAA,EAAa5E,CAAA,CACX;YAAA,eACEwJ,EAAA,CAAerJ,OAAA,YAAfqJ,EAAA,CAAerJ,OAAA,CAAU;cACvBwC,IAAA,EAAM;cACNU,MAAA,EAAQmH,EAAA,CAAgBrK;YAAA;UAAA,GAE5B;QAAA;QAGJiB,OAAA,EAAS;UAAEC,YAAA,EAAAd;QAAA;QACX4D,QAAA,EAAU;UACRC,WAAA,EAAapE,CAAA,WACJrB,CAAA,EAASC,CAAA;YAAA;cAAA,OAAA4B,OAAA,CAAA6D,OAAA,SACdiF,EAAA,CAAiBnJ,OAAA,YAAjBmJ,EAAA,CAAiBnJ,OAAA,CAAU;gBACzBwC,IAAA,EAAM;gBACNU,MAAA,EAAQzE,CAAA,CAAMsE,OAAA,CAAQG,MAAA,IAAU;cAAA;YAAA,SAAA1E,CAAA;cAAA,OAAA6B,OAAA,CAAA+D,MAAA,CAAA5F,CAAA;YAAA;UAAA,GAEpC;UAEF6F,WAAA,EAAaxE,CAAA;YAAA;cAAA,OAAAQ,OAAA,CAAA6D,OAAA,SACCiF,EAAA,CAAiBnJ,OAAA,YAAjBmJ,EAAA,CAAiBnJ,OAAA,CAAU;gBAAEwC,IAAA,EAAM;cAAA;YAAA,SAAAhE,CAAA;cAAA,OAAA6B,OAAA,CAAA+D,MAAA,CAAA5F,CAAA;YAAA;UAAA,GAC/C;UAEF8F,YAAA,EAAczE,CAAA;YAAA;cAAA,OAAAQ,OAAA,CAAA6D,OAAA,SACAiF,EAAA,CAAiBnJ,OAAA,YAAjBmJ,EAAA,CAAiBnJ,OAAA,CAAU;gBAAEwC,IAAA,EAAM;cAAA;YAAA,SAAAhE,CAAA;cAAA,OAAA6B,OAAA,CAAA+D,MAAA,CAAA5F,CAAA;YAAA;UAAA,GAC/C;UAEF+F,aAAA,EAAe1E,CAAA;YAAA;cAAA,OAAAQ,OAAA,CAAA6D,OAAA,SAEXiF,EAAA,CAAiBnJ,OAAA,YAAjBmJ,EAAA,CAAiBnJ,OAAA,CAAU;gBACzBwC,IAAA,EAAM;gBACNU,MAAA,EAAQmH,EAAA,CAAgBrK;cAAA;YAAA,SAAAxB,CAAA;cAAA,OAAA6B,OAAA,CAAA+D,MAAA,CAAA5F,CAAA;YAAA;UAAA,GAE5B;UAEFsF,SAAA,EAAWjE,CAAA,WACFrB,CAAA,EAASC,CAAA;YAAA;cAAA,OAAA4B,OAAA,CAAA6D,OAAA,SACdmF,EAAA,CAAerJ,OAAA,YAAfqJ,EAAA,CAAerJ,OAAA,CAAU;gBACvBwC,IAAA,EAAM;gBACNU,MAAA,EAAQ1E,CAAA,CAAQyE;cAAA;YAAA,SAAAzE,CAAA;cAAA,OAAA6B,OAAA,CAAA+D,MAAA,CAAA5F,CAAA;YAAA;UAAA,GAEpB;UAEFqF,SAAA,EAAWhE,CAAA;YAAA;cAAA,OAAAQ,OAAA,CAAA6D,OAAA,SACGmF,EAAA,CAAerJ,OAAA,YAAfqJ,EAAA,CAAerJ,OAAA,CAAU;gBAAEwC,IAAA,EAAM;cAAA;YAAA,SAAAhE,CAAA;cAAA,OAAA6B,OAAA,CAAA+D,MAAA,CAAA5F,CAAA;YAAA;UAAA,GAC7C;UAEFgG,UAAA,EAAY3E,CAAA;YAAA;cAAA,OAAAQ,OAAA,CAAA6D,OAAA,SACEmF,EAAA,CAAerJ,OAAA,YAAfqJ,EAAA,CAAerJ,OAAA,CAAU;gBAAEwC,IAAA,EAAM;cAAA;YAAA,SAAAhE,CAAA;cAAA,OAAA6B,OAAA,CAAA+D,MAAA,CAAA5F,CAAA;YAAA;UAAA,GAC7C;UAEFiG,WAAA,EAAa5E,CAAA;YAAA;cAAA,OAAAQ,OAAA,CAAA6D,OAAA,SAETmF,EAAA,CAAerJ,OAAA,YAAfqJ,EAAA,CAAerJ,OAAA,CAAU;gBACvBwC,IAAA,EAAM;gBACNU,MAAA,EAAQmH,EAAA,CAAgBrK;cAAA;YAAA,SAAAxB,CAAA;cAAA,OAAA6B,OAAA,CAAA+D,MAAA,CAAA5F,CAAA;YAAA;UAAA,GAE5B;UAEFkG,oBAAA,EAAsB7E,CAAA,WACbrB,CAAA,EAASC,CAAA;YAAA;cAAA,OAAA4B,OAAA,CAAA6D,OAAA,CACR4K,EAAA,CAAS;gBACbhM,CAAA,EAAG+L,EAAA,CAAe7O,OAAA;gBAClB8I,KAAA,EAAO;gBACPrC,SAAA,EAAWgI,EAAA,CAAazO,OAAA;gBACxB2J,OAAA,EAASgF,EAAA,CAAW3O,OAAA;gBAEpB0J,OAAA,EAASmF,EAAA,CAAe7O,OAAA;gBACxBuP,SAAA,GAAW;cAAA,IAAApL,IAAA;YAAA,CATgB,QAAA3F,CAAA;cAAA,OAAA6B,OAAA,CAAA+D,MAAA,CAAA5F,CAAA;YAAA;UAAA,GAY/B,CAACsQ,EAAA;UAEHnK,QAAA,EAAU9E,CAAA,WACDrB,CAAA,EAASC,CAAA;YAAA;cAAA,OACdyK,EAAA,CAAWlJ,OAAA,IAAU,GAAAK,OAAA,CAAA6D,OAAA,CACf7D,OAAA,CAAQmP,GAAA,CAAI,CAChB5E,EAAA,CAAc5K,OAAA,CAAQ2E,QAAA,IACtBgH,EAAA,CAAa3L,OAAA,CAAQ2E,QAAA,IACrBuG,EAAA,CAAalL,OAAA,CAAQ2E,QAAA,MAAAR,IAAA;YAAA,CANN,QAAA3F,CAAA;cAAA,OAAA6B,OAAA,CAAA+D,MAAA,CAAA5F,CAAA;YAAA;UAAA,GASnB,CAAC0M,EAAA,EAAcS,EAAA,EAAcf,EAAA;UAE/BhG,UAAA,EAAY/E,CAAA;YAAA;cAAA,OACV+K,EAAA,CAAc5K,OAAA,CAAQ4E,UAAA,IACtB+G,EAAA,CAAa3L,OAAA,CAAQ4E,UAAA,IACrBsG,EAAA,CAAalL,OAAA,CAAQ4E,UAAA,IACrBsE,EAAA,CAAWlJ,OAAA,IAAU,GAAAK,OAAA,CAAA6D,OAAA;YAAA,CAJA,QAAA1F,CAAA;cAAA,OAAA6B,OAAA,CAAA+D,MAAA,CAAA5F,CAAA;YAAA;UAAA,GAKpB,CAAC0M,EAAA,EAAcS,EAAA,EAAcf,EAAA;UAChC9F,eAAA,EAAiBjF,CAAA;YAAA;cAAA,OACfuK,EAAA,CAAUpK,OAAA,GAAU6O,EAAA,CAAe7O,OAAA,EAAAK,OAAA,CAAA6D,OAAA,CAC7B4K,EAAA,CAAS;gBACbhM,CAAA,EAAG+L,EAAA,CAAe7O,OAAA;gBAClB8I,KAAA,EAAO;gBACPrC,SAAA,EAAWgI,EAAA,CAAazO,OAAA;gBACxB2J,OAAA,EAASgF,EAAA,CAAW3O,OAAA;gBAEpB0J,OAAA,EAASmF,EAAA,CAAe7O,OAAA;gBACxBuP,SAAA,GAAW;cAAA,IAAApL,IAAA;YAAA,CATa,QAAA3F,CAAA;cAAA,OAAA6B,OAAA,CAAA+D,MAAA,CAAA5F,CAAA;YAAA;UAAA,GAWzB,CAACsQ,EAAA;UACJjK,YAAA,EAAchF,CAAA;YAAA;cAAA,OAAAQ,OAAA,CAAA6D,OAAA,CACN4K,EAAA,CAAS;gBACbhM,CAAA,EAAG;gBACHgG,KAAA,EAAO;gBACPrC,SAAA,EAAWgI,EAAA,CAAazO,OAAA;gBACxB2J,OAAA,EAASgF,EAAA,CAAW3O,OAAA;gBAEpB0J,OAAA,EAASmF,EAAA,CAAe7O,OAAA;gBACxBuP,SAAA,GAAW;cAAA,IAAApL,IAAA;gBAAA,OAGbiG,EAAA,CAAUpK,OAAA,GAAU6O,EAAA,CAAe7O,OAAA,EAAAK,OAAA,CAAA6D,OAAA,CAE7B4K,EAAA,CAAS;kBACbhM,CAAA,EAAG+L,EAAA,CAAe7O,OAAA;kBAClB8I,KAAA,EAAO;kBACPrC,SAAA,EAAWgI,EAAA,CAAazO,OAAA;kBACxB2J,OAAA,EAASgF,EAAA,CAAW3O,OAAA;kBAEpB0J,OAAA,EAASmF,EAAA,CAAe7O,OAAA;kBACxBuP,SAAA,EAAWhF,EAAA,CAAqBvK;gBAAA,IAAAmE,IAAA;cAAA;YAAA,CApBX,QAAA3F,CAAA;cAAA,OAAA6B,OAAA,CAAA+D,MAAA,CAAA5F,CAAA;YAAA;UAAA,GAsBtB,CAACsQ,EAAA,EAAUvE,EAAA;UACdxF,YAAA,EAAclF,CAAA,WACLrB,CAAA,EAASC,CAAA;YAAA;cACd,IAAMC,CAAA,GAAOkQ,EAAA,CAAY5O,OAAA,CAAQxB,CAAA,CAAQsE,CAAA;cAAA,OACzCsH,EAAA,CAAUpK,OAAA,GAAUtB,CAAA,EACpB6B,CAAA,CAAYP,OAAA,GAAUtB,CAAA,EAAA2B,OAAA,CAAA6D,OAAA,CAChB4K,EAAA,CAAS;gBACbhM,CAAA,EAAGpE,CAAA;gBACHoK,KAAA,EAAO;gBACPrC,SAAA,EAAWgI,EAAA,CAAazO,OAAA;gBACxB2J,OAAA,EAASgF,EAAA,CAAW3O,OAAA;gBACpB0J,OAAA,EAASgF,EAAA,CAAW1O,OAAA;gBACpBuP,SAAA,EAAWhF,EAAA,CAAqBvK,OAAA;gBAChCgP,MAAA,EAAQ;kBAAEhM,QAAA,EAAUxE,CAAA,CAAQwE;gBAAA;cAAA,IAAAmB,IAAA;YAAA,CAZT,QAAA3F,CAAA;cAAA,OAAA6B,OAAA,CAAA+D,MAAA,CAAA5F,CAAA;YAAA;UAAA,GAevB,CAACsQ,EAAA,EAAUvO,CAAA,EAAagK,EAAA;UAE1BvF,cAAA,EAAgBnF,CAAA;YAAA;cACd,IAAMrB,CAAA,GAAOoQ,EAAA,CAAY5O,OAAA,CAAQoK,EAAA,CAAUpK,OAAA;cAAA,OAC3CoK,EAAA,CAAUpK,OAAA,GAAUxB,CAAA,EACpB+B,CAAA,CAAYP,OAAA,GAAUxB,CAAA,EAAA6B,OAAA,CAAA6D,OAAA,CAChB4K,EAAA,CAAS;gBACbhM,CAAA,EAAGtE,CAAA;gBACHsK,KAAA,EAAO;gBACPrC,SAAA,EAAWgI,EAAA,CAAazO,OAAA;gBACxB2J,OAAA,EAASgF,EAAA,CAAW3O,OAAA;gBACpB0J,OAAA,EAASgF,EAAA,CAAW1O,OAAA;gBACpBuP,SAAA,EAC8B,cAA5BlF,EAAA,CAAgBrK,OAAA,IACZuK,EAAA,CAAqBvK;cAAA,IAAAmE,IAAA;YAAA,CAZJ,QAAA3F,CAAA;cAAA,OAAA6B,OAAA,CAAA+D,MAAA,CAAA5F,CAAA;YAAA;UAAA,GAexB,CAACsQ,EAAA,EAAUvO,CAAA,EAAagK,EAAA;UAC3BtF,aAAA,EAAepF,CAAA,WACNrB,CAAA,EAASC,CAAA;YAAA;cAAA,OAEdqQ,EAAA,CAAS;gBACPpF,OAAA,EAASU,EAAA,CAAUpK,OAAA;gBACnBuP,SAAA,GAAW;cAAA,IAGbnF,EAAA,CAAUpK,OAAA,GAAU,GAAAK,OAAA,CAAA6D,OAAA,CAEd4K,EAAA,CAAS;gBACbhM,CAAA,EAAG;gBACH2D,SAAA,EAAWgI,EAAA,CAAazO,OAAA;gBACxB2J,OAAA,EAASgF,EAAA,CAAW3O,OAAA;gBACpBuP,SAAA,EAAWhF,EAAA,CAAqBvK;cAAA,IAAAmE,IAAA;gBAAA,OAAA9D,OAAA,CAAA6D,OAAA,CAG5B4K,EAAA,CAAS;kBAAEhG,KAAA,EAAO;kBAAGyG,SAAA,GAAW;gBAAA,IAAApL,IAAA;cAAA;YAAA,CAjBhB,QAAA3F,CAAA;cAAA,OAAA6B,OAAA,CAAA+D,MAAA,CAAA5F,CAAA;YAAA;UAAA,GAmBxB,CAACsQ,EAAA,EAAUvE,EAAA;QAAA;MAAA;MAxNVkF,EAAA,GAAAJ,EAAA;MAASK,EAAA,GAAAL,EAAA;IA6NhB/Q,CAAA,CAAU;MACH0K,EAAA,IAGH0G,EAAA,CADEzQ,CAAA,GACG,SAEA;IAAA,GAEN,CAACA,CAAA,EAAOyQ,EAAA,EAAM1G,EAAA,IACjB7K,CAAA,CAAgB;MAAA,CAEVoQ,EAAA,IAAaD,EAAA,IAAWD,EAAA,KAC1BqB,EAAA,CAAK;IAAA,GAEN,CAACnB,EAAA,EAAWD,EAAA,EAASD,EAAA,EAASqB,EAAA,IACjCpR,CAAA,CACE;MAAA;QAEEsM,EAAA,CAAc5K,OAAA,CAAQ4E,UAAA,IACtB+G,EAAA,CAAa3L,OAAA,CAAQ4E,UAAA,IACrBsG,EAAA,CAAalL,OAAA,CAAQ4E,UAAA;MAAA;IAAA,GAEvB,CAACsG,EAAA,EAAcS,EAAA,EAAcf,EAAA,IAG/BnL,CAAA,CACEpB,CAAA,EACA;MAAA,OAAO;QACLsR,MAAA,EAAQ,SAAAA,OAACnR,CAAA,EAAAC,CAAA;UAAA,IAAAC,CAAA,cAAAD,CAAA,GAAwD,KAAAA,CAAA;YAAAkB,CAAA,GAAAjB,CAAA,CAApCsE,QAAA;YAAA1E,CAAA,cAAAqB,CAAA,GAAW,IAAAA,CAAA;YAAAtB,CAAA,GAAAK,CAAA,CAAGwE,MAAA;YAAA1D,CAAA,cAAAnB,CAAA,GAAS,WAAAA,CAAA;UAClDqR,EAAA,CAAK,QAAQ;YACX3M,OAAA,EAAS;cACPD,CAAA,EAAG8L,EAAA,CAAY5O,OAAA,CAAQxB,CAAA;cACvBwE,QAAA,EAAA1E,CAAA;cACA4E,MAAA,EAAA1D;YAAA;UAAA;QAAA;QAIF,IAAAyO,OAAA;UACF,OAAO7D,EAAA,CAAUpK,OAAA;QAAA;MAAA;IAAA,GAGrB,CAAC0P,EAAA,IAGHpR,CAAA,CAAU;MACR,IAAME,CAAA,GAAOuL,EAAA,CAAU/J,OAAA;QAEjBvB,CAAA,GAAmB,SAAnBA,EAAmBD,CAAA;UACnB8L,EAAA,CAAoBtK,OAAA,IACtBxB,CAAA,CAAEoR,cAAA;QAAA;QAIAlR,CAAA,GAA0B,SAA1BA,EAA0BD,CAAA;UAC1BD,CAAA,CAAKqR,SAAA,GAAY,MACnB9C,qBAAA,CAAsB;YACpBvO,CAAA,CAAKiJ,KAAA,CAAMqI,QAAA,GAAW,UACtBtR,CAAA,CAAKqR,SAAA,GAAY,GACjBrR,CAAA,CAAKiJ,KAAA,CAAMsI,cAAA,CAAe;UAAA,IAE5BtR,CAAA,CAAEmR,cAAA;QAAA;MASN,OALIvH,EAAA,KACF7J,CAAA,CAAKwO,gBAAA,CAAiB,UAAUvO,CAAA,GAChCD,CAAA,CAAKwO,gBAAA,CAAiB,aAAavO,CAAA,GACnCD,CAAA,CAAKwO,gBAAA,CAAiB,cAActO,CAAA;QAGpCF,CAAA,CAAKyO,mBAAA,CAAoB,UAAUxO,CAAA,GACnCD,CAAA,CAAKyO,mBAAA,CAAoB,aAAaxO,CAAA,GACtCD,CAAA,CAAKyO,mBAAA,CAAoB,cAAcvO,CAAA;MAAA;IAAA,GAExC,CAAC2J,EAAA,EAAqB0B,EAAA;IAEzB,IA0HMiG,EAAA,GAAOlN,CAAA,CA1HM,UAAAtE,CAAA;MAAA,IAAAC,CAAA,GAAAD,CAAA,CACjByR,IAAA;QAAAvR,CAAA,IAAAD,CAAA,cAAAA,CAAA,GAAiE,KAAAA,CAAA;QAAAkB,CAAA,IAAAjB,CAAA,cAAAA,CAAA,GAAN,KAAAA,CAAA,EAAlDwR,UAAA;QAAA5R,CAAA,cAAAqB,CAAA,IAAAA,CAAA;QAAAtB,CAAA,GAAAK,CAAA,CAAoByR,iBAAA;QAAA3Q,CAAA,cAAAnB,CAAA,IAAAA,CAAA;QAC7BwB,CAAA,GAAArB,CAAA,CAAA4R,MAAA;QACc7Q,CAAA,GAAAf,CAAA,CAAd6R,SAAA;QACA5Q,CAAA,GAAAjB,CAAA,CAAA8R,IAAA;QACA5Q,CAAA,GAAAlB,CAAA,CAAA+R,KAAA;QACA3Q,CAAA,GAAApB,CAAA,CAAAgS,IAAA;QAAA/G,CAAA,GAAAjL,CAAA,CACAiS,IAAA;QAAA7D,CAAA,cAAAnD,CAAA,GAAOG,EAAA,CAAO9G,CAAA,CAAE4N,QAAA,KAAAjH,CAAA;QAEhBoD,CAAA,GAAArO,CAAA,CAAAmS,GAAA;QACAlL,CAAA,GAAAjH,CAAA,CAAAwE,QAAA;QAEMF,CAAA,IAAY,IAAAtE,CAAA,CAJlBoS,QAAA;MAOA,KAAK1H,EAAA,CAAWlJ,OAAA,EAGd,OADAH,CAAA,IACO+M,CAAA;MAGT,IAAIpH,CAAA,IAAalH,CAAA,IAAcuO,CAAA,EAI7B,OAHAhN,CAAA,IAEAS,UAAA,CAAW;QAAA,OAAMkF,CAAA;MAAA,GAAa,IACvBoH,CAAA;MAIT,IAAIC,CAAA,EACF,OAAOD,CAAA;MAGT,IAAMf,CAAA,GAAOe,CAAA,GAAO9J,CAAA;QACdgI,CAAA,GAAoBhI,CAAA,GAAK2C,CAAA;QACzBwF,CAAA,GAAarM,IAAA,CAAKoP,GAAA,CACtBU,EAAA,CAAW1O,OAAA,EACXpB,IAAA,CAAKwO,GAAA,CAAIuB,EAAA,CAAW3O,OAAA,EAAS6L,CAAA,GAA2B,IAApBf,CAAA;MAGtC,KACGrL,CAAA,IACD+F,CAAA,IACAjG,CAAA,GAAY,KACZsM,CAAA,GAAOf,CAAA,GAAoB4D,EAAA,CAAW1O,OAAA,GAAU,GAIhD,OAFAH,CAAA,IACA2F,CAAA,IACOoH,CAAA;MAGT,IAAI3M,CAAA,GAAOR,CAAA,GAEN+F,CAAA,IAAakJ,EAAA,CAAW1O,OAAA,KAAY2O,EAAA,CAAW3O,OAAA,GAc9CmN,CAAA,CACEtB,CAAA,EACArG,CAAA,GAAY,IAAIkJ,EAAA,CAAW1O,OAAA,EAC3B2O,EAAA,CAAW3O,OAAA,EACX,OAjBF6L,CAAA,GAAO6C,EAAA,CAAW1O,OAAA,GAChBmN,CAAA,CACEtB,CAAA,EACA6C,EAAA,CAAW1O,OAAA,EACU,IAArB2O,EAAA,CAAW3O,OAAA,EACX,OAEFmN,CAAA,CACEtB,CAAA,EACA6C,EAAA,CAAW1O,OAAA,GAAU,GACrB2O,EAAA,CAAW3O,OAAA,EACX,OAQNiL,CAAA;MAoBJ,OAlBI5C,EAAA,IAAuB7I,CAAA,IACrBS,CAAA,IAAQ0O,EAAA,CAAW3O,OAAA,KACrBC,CAAA,GAAO0O,EAAA,CAAW3O,OAAA,GAGhB4M,CAAA,KAAS+B,EAAA,CAAW3O,OAAA,IAAW+J,EAAA,CAAU/J,OAAA,CAAQ6P,SAAA,GAAY,MAC/D5P,CAAA,GAAO0O,EAAA,CAAW3O,OAAA,GAGpBsK,EAAA,CAAoBtK,OAAA,GAAUC,CAAA,GAAO0O,EAAA,CAAW3O,OAAA,IAEhDsK,EAAA,CAAoBtK,OAAA,IAAU,GAG5BN,CAAA,IACFgQ,EAAA,CAAK,SAGH9P,CAAA,IACF8P,EAAA,CAAK,QAAQ;QACX3M,OAAA,EAAS;UACPD,CAAA,EAAG7C,CAAA;UACH+C,QAAA,EAAUyC,CAAA,GAAW,MAAOA,CAAA,GAAW;UACvCvC,MAAA,EAAQ;QAAA;MAAA,IAIL0J,CAAA,KAMT/C,EAAA,CAAI;QACF/G,CAAA,EAAG7C,CAAA;QACH6I,KAAA,EAAO;QACPrC,SAAA,EAAWgI,EAAA,CAAazO,OAAA;QACxB2J,OAAA,EAASgF,EAAA,CAAW3O,OAAA;QACpB0J,OAAA,EAASgF,EAAA,CAAW1O,OAAA;QACpBuP,SAAA,GAAW;QACXP,MAAA,EAAQ;UAAEhM,QAAA,EAAAyC;QAAA;MAAA,IAILmH,CAAA;IAAA,GAGwB;MAC/BiE,UAAA,GAAY;IAAA;IAGd,IAAI/R,MAAA,CAAOC,KAAA,CAAM4P,EAAA,CAAW3O,OAAA,GAC1B,UAAUhB,SAAA,CAAU;IAEtB,IAAIF,MAAA,CAAOC,KAAA,CAAM2P,EAAA,CAAW1O,OAAA,GAC1B,UAAUhB,SAAA,CAAU;IAGtB,IAAM8R,EAAA,aAAAtS,CAAA;MAAA,IAAAC,CAAA;QO1lBNC,CAAA,GAAAF,CAAA,CAAAuS,MAAA;QAOMpR,CAAA,GAA0BiN,CAAA,CAE9B,CAAClO,CAAA,CAAOoE,CAAA,EAAGpE,CAAA,CAAO+H,SAAA,GAClB,UAACjI,CAAA,EAAGC,CAAA;UACF,OAAUG,IAAA,CAAKC,KAAA,CAAMN,CAAA,CAAME,CAAA,GAAYD,CAAA,EAAG,GAAG;QAAA;QAa3CF,CAAA,GAAoBsO,CAAA,CAExB,CAAClO,CAAA,CAAOoE,CAAA,EAAGpE,CAAA,CAAOgL,OAAA,EAAShL,CAAA,CAAOiL,OAAA,GAClC,UAACnL,CAAA,EAAGC,CAAA,EAASC,CAAA;UAAA,OAAeH,CAAA,CAAMC,CAAA,EAAGC,CAAA,EAASC,CAAA;QAAA;QAG1CL,CAAA,GAAeuO,CAAA,CAEnB,CAAClO,CAAA,CAAOoE,CAAA,EAAGpE,CAAA,CAAOgL,OAAA,EAAShL,CAAA,CAAOiL,OAAA,GAClC,UAACnL,CAAA,EAAGC,CAAA,EAASC,CAAA;UACX,OAAIF,CAAA,GAAIC,CAAA,GACIA,CAAA,GAAUD,CAAA,UAElBA,CAAA,GAAIE,CAAA,GACIA,CAAA,GAAUF,CAAA,UAEf;QAAA;QAILgB,CAAA,GAAoBoN,CAAA,CAExB,CAAClO,CAAA,CAAOoE,CAAA,EAAGpE,CAAA,CAAOiL,OAAA,GAClB,UAACnL,CAAA,EAAGC,CAAA;UACF,OAAID,CAAA,IAAKC,CAAA,GACAG,IAAA,CAAKoS,IAAA,CAAKxS,CAAA,GAAIC,CAAA;QAAA;QAMrBoB,CAAA,GAA4B+M,CAAA,CAEhC,CAAClO,CAAA,CAAOoE,CAAA,EAAGpE,CAAA,CAAOgL,OAAA,GAClB,UAAClL,CAAA,EAAGC,CAAA;UACF,KAAKA,CAAA,EACH;UAEF,IAAMC,CAAA,GAAOE,IAAA,CAAKoP,GAAA,CAAIvP,CAAA,GAAU,IAAI,IAAI;UAOxC,OAAOF,CAAA,EADMC,CAAA,GAAIE,CAAA,KADH,KAJDE,IAAA,CAAKwO,GAAA,CAAI3O,CAAA,GAAU,IAAI,IAAIA,CAAA,IAIFC,CAAA,IAHzB,IAKK,GAAG;QAAA;QAInBa,CAAA,GAAsBqN,CAAA,CAE1B,CAAClO,CAAA,CAAOoE,CAAA,EAAGpE,CAAA,CAAOgL,OAAA,GAClB,UAAClL,CAAA,EAAGC,CAAA;UAAA,OAAaA,CAAA,GAAUF,CAAA,CAAMC,CAAA,GAAIC,CAAA,EAAS,GAAG,KAAK;QAAA;MAGxD,QAAAA,CAAA,OAEG,4BAAkCoB,CAAA,EAAApB,CAAA,CAElC,6BAAmCc,CAAA,EAAAd,CAAA,CAEnC,4BAAkCe,CAAA,EAAAf,CAAA,CAElC,gCAAsCJ,CAAA,EAAAI,CAAA,CAEtC,4BAAkCkB,CAAA,EAAAlB,CAAA,CAElC,sBAA4BH,CAAA,EAAAG,CAAA;IAAA,CP+fR,CAAwB;MAAEsS,MAAA,EAAAnH;IAAA;IAEjD,OACEnL,CAAA,CAAAwS,aAAA,CAACpE,CAAA,CAASqE,GAAA,EAAA/O,CAAA,KACJmG,EAAA;MACJ;MACA,mBAAiB6I,CAAA,CAAaC,IAAA,CAAK3B,EAAA,CAAQhF,OAAA;MAC3C,yBAAuBrD,CAAA;MACvB,8BAA4B5B,CAAA;MAC5B,0BAAwB3C,CAAA;MACxB,0BAAwB/B,CAAA;MACxBqF,SAAA,EAAWlG,CAAA;MACXoR,GAAA,EAAKvH,EAAA;MACLrC,KAAA,EAAAtF,CAAA,KAEK2O,EAAA,EAEAtJ,CAAA;QAIH8J,OAAA,EAAS1H,EAAA,CAAOd;MAAA;IAAA,IAGjBrD,CAAA,EACA2B,CAAA,iBACC3I,CAAA,CAAAwS,aAAA,QAAA9O,CAAA;MAGEoP,GAAA,EAAI;MACJ;IAAA,GACIvB,EAAA,CAAK;MAAEE,UAAA,GAAY;IAAA,mBAG3BzR,CAAA,CAAAwS,aAAA;MACEM,GAAA,EAAI;MACJ,cAAW;MACXC,IAAA,EAAK;MACL;MACAC,QAAA,GAAW;MACXJ,GAAA,EAAKlH,EAAA;MACLuH,SAAA,EAAW,SAAAA,UAAClT,CAAA;QACQ,aAAdA,CAAA,CAAM+S,GAAA,KAER/S,CAAA,CAAMmT,eAAA,IACFnM,CAAA,IAAWA,CAAA;MAAA;IAAA,IAIP,MAAX3C,CAAA,iBACCpE,CAAA,CAAAwS,aAAA,QAAA9O,CAAA;MAAKoP,GAAA,EAAI;MAAS;MAAiBF,GAAA,EAAKpH;IAAA,GAAe+F,EAAA,KACpDnN,CAAA,gBAGLpE,CAAA,CAAAwS,aAAA,QAAA9O,CAAA;MAAKoP,GAAA,EAAI;MAAS;MAAiBF,GAAA,EAAKtH;IAAA,GAAgB1B,EAAA,GAAsB2H,EAAA,CAAK;MAAEG,iBAAA,GAAmB;IAAA,KAAU,kBAChH1R,CAAA,CAAAwS,aAAA;MAAK;MAAkBI,GAAA,EAAKrH;IAAA,GACzBtK,CAAA,IAGJoB,CAAA,iBACCrC,CAAA,CAAAwS,aAAA,QAAA9O,CAAA;MAAKoP,GAAA,EAAI;MAASF,GAAA,EAAKnH,EAAA;MAAW;IAAA,GAAqB8F,EAAA,KACpDlP,CAAA;EAAA;EASPqQ,CAAA,GAAe,CACnB,UACA,WACA,QACA,WACA,YACA,YACA;AAIF,SAAStK,EAAArI,CAAA;EAAA,IAA2BC,CAAA,GAAAD,CAAA,CAAA2P,QAAA;EAClC,eAAO1P,CAAA,GAAAA,CAAA,GAAYG,IAAA,CAAKwO,GAAA,CAAAW,KAAA,CAALnP,IAAA,EAAAJ,CAAA,CADGuI,UAAA;AAAA;AAGxB,SAASE,EAAAzI,CAAA;EACP,OAAAA,CAAA,CADqB6O,SAAA;AAAA;AAAA,IAAA3G,CAAA;EQ7qBVE,CAAA,GAAclH,CAAA,CAA8B,UAAAC,CAAA,EAEvDrB,CAAA;IAAA,IADED,CAAA,GAAAsB,CAAA,CAAAgI,aAAA;MAAepI,CAAA,GAAAI,CAAA,CAAAoI,WAAA;MAAatI,CAAA,GAAAE,CAAA,CAAAiS,qBAAA;MAA0BlS,CAAA,GAAA6I,CAAA,CAAA5I,CAAA,EAAA+G,CAAA;MAAA9G,CAAA,GAI1BJ,CAAA,EAAS;MAAhCiK,CAAA,GAAA7J,CAAA;MAASgN,CAAA,GAAAhN,CAAA;MACViN,CAAA,GAAWnO,CAAA;MAEX+G,CAAA,GAAc/G,CAAA,CAAO;MAMrBoE,CAAA,GAAkBpE,CAAA,CACtBe,CAAA,IAAyBC,CAAA,CAAMuC,IAAA,GAAO,SAAS;IAIjD9D,CAAA,CAAgB;MACd,IAAIuB,CAAA,CAAMuC,IAAA,EAKR,OAJAiL,oBAAA,CAAqBL,CAAA,CAAS7M,OAAA,GAC9B4M,CAAA,EAAW;QAIT9J,CAAA,CAAgB9C,OAAA,GAAU;MAAA;IAAA,GAG7B,CAACN,CAAA,CAAMuC,IAAA;IAEV,IAAMkL,CAAA,GAAoBtN,CAAA,WACSrB,CAAA;QAAA,OAAA6B,OAAA,CAAA6D,OAAA,SAEzB7F,CAAA,YAAAA,CAAA,CAAgBG,CAAA,GAAA2F,IAAA;UAEH,WAAf3F,CAAA,CAAMgE,IAAA,IAER0K,oBAAA,CAAqBL,CAAA,CAAS7M,OAAA;QAAA;MAAA,GAGlC,CAAC3B,CAAA;MAGGwN,CAAA,GAAkBhM,CAAA,WACSrB,CAAA;QAAA,OAAA6B,OAAA,CAAA6D,OAAA,SAEvB3E,CAAA,YAAAA,CAAA,CAAcf,CAAA,GAAA2F,IAAA;UAED,YAAf3F,CAAA,CAAMgE,IAAA,KAERqK,CAAA,CAAS7M,OAAA,GAAU+M,qBAAA,CAAsB;YAAA,OAAMH,CAAA,EAAW;UAAA;QAAA;MAAA,GAG9D,CAACrN,CAAA;IAIH,OAAKkK,CAAA,gBAKHhL,CAAA,CAAAwS,aAAA,CAACzS,CAAA;MAAO;IAAA,gBACNC,CAAA,CAAAwS,aAAA,CAAClL,CAAA,EAAA5D,CAAA,KACKzC,CAAA;MACJ4G,WAAA,EAAab,CAAA;MACb4L,GAAA,EAAK/S,CAAA;MACL4C,YAAA,EAAc4B,CAAA,CAAgB9C,OAAA;MAC9B2H,aAAA,EAAewF,CAAA;MACfpF,WAAA,EAAa8D;IAAA;EAAA;AAAA,SAAAjF,CAAA,IAAAiL,WAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}