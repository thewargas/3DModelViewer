{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar actions = require('./actions.js');\nvar Actor = require('./Actor.js');\nvar utils = require('./utils.js');\n\n/**\r\n * Returns an actor behavior from a reducer and its initial state.\r\n *\r\n * @param transition The pure reducer that returns the next state given the current state and event.\r\n * @param initialState The initial state of the reducer.\r\n * @returns An actor behavior\r\n */\n\nfunction fromReducer(transition, initialState) {\n  return {\n    transition: transition,\n    initialState: initialState\n  };\n}\nfunction fromPromise(promiseFn) {\n  var initialState = {\n    error: undefined,\n    data: undefined,\n    status: 'pending'\n  };\n  return {\n    transition: function transition(state, event, _a) {\n      var parent = _a.parent,\n        id = _a.id,\n        observers = _a.observers;\n      switch (event.type) {\n        case 'fulfill':\n          parent === null || parent === void 0 ? void 0 : parent.send(actions.doneInvoke(id, event.data));\n          return {\n            error: undefined,\n            data: event.data,\n            status: 'fulfilled'\n          };\n        case 'reject':\n          parent === null || parent === void 0 ? void 0 : parent.send(actions.error(id, event.error));\n          observers.forEach(function (observer) {\n            observer.error(event.error);\n          });\n          return {\n            error: event.error,\n            data: undefined,\n            status: 'rejected'\n          };\n        default:\n          return state;\n      }\n    },\n    initialState: initialState,\n    start: function start(_a) {\n      var self = _a.self;\n      promiseFn().then(function (data) {\n        self.send({\n          type: 'fulfill',\n          data: data\n        });\n      }, function (reason) {\n        self.send({\n          type: 'reject',\n          error: reason\n        });\n      });\n      return initialState;\n    }\n  };\n}\nfunction spawnBehavior(behavior, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  var state = behavior.initialState;\n  var observers = new Set();\n  var mailbox = [];\n  var flushing = false;\n  var flush = function flush() {\n    if (flushing) {\n      return;\n    }\n    flushing = true;\n    while (mailbox.length > 0) {\n      var event_1 = mailbox.shift();\n      state = behavior.transition(state, event_1, actorCtx);\n      observers.forEach(function (observer) {\n        return observer.next(state);\n      });\n    }\n    flushing = false;\n  };\n  var actor = Actor.toActorRef({\n    id: options.id,\n    send: function send(event) {\n      mailbox.push(event);\n      flush();\n    },\n    getSnapshot: function getSnapshot() {\n      return state;\n    },\n    subscribe: function subscribe(next, handleError, complete) {\n      var observer = utils.toObserver(next, handleError, complete);\n      observers.add(observer);\n      observer.next(state);\n      return {\n        unsubscribe: function unsubscribe() {\n          observers.delete(observer);\n        }\n      };\n    }\n  });\n  var actorCtx = {\n    parent: options.parent,\n    self: actor,\n    id: options.id || 'anonymous',\n    observers: observers\n  };\n  state = behavior.start ? behavior.start(actorCtx) : state;\n  return actor;\n}\nexports.fromPromise = fromPromise;\nexports.fromReducer = fromReducer;\nexports.spawnBehavior = spawnBehavior;","map":{"version":3,"names":["Object","defineProperty","exports","value","actions","require","Actor","utils","fromReducer","transition","initialState","fromPromise","promiseFn","error","undefined","data","status","state","event","_a","parent","id","observers","type","send","doneInvoke","forEach","observer","start","self","then","reason","spawnBehavior","behavior","options","Set","mailbox","flushing","flush","length","event_1","shift","actorCtx","next","actor","toActorRef","push","getSnapshot","subscribe","handleError","complete","toObserver","add","unsubscribe","delete"],"sources":["B:/dev/3DModelViewer/frontend/node_modules/xstate/lib/behaviors.js"],"sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar actions = require('./actions.js');\nvar Actor = require('./Actor.js');\nvar utils = require('./utils.js');\n\n/**\r\n * Returns an actor behavior from a reducer and its initial state.\r\n *\r\n * @param transition The pure reducer that returns the next state given the current state and event.\r\n * @param initialState The initial state of the reducer.\r\n * @returns An actor behavior\r\n */\n\nfunction fromReducer(transition, initialState) {\n  return {\n    transition: transition,\n    initialState: initialState\n  };\n}\nfunction fromPromise(promiseFn) {\n  var initialState = {\n    error: undefined,\n    data: undefined,\n    status: 'pending'\n  };\n  return {\n    transition: function (state, event, _a) {\n      var parent = _a.parent,\n          id = _a.id,\n          observers = _a.observers;\n\n      switch (event.type) {\n        case 'fulfill':\n          parent === null || parent === void 0 ? void 0 : parent.send(actions.doneInvoke(id, event.data));\n          return {\n            error: undefined,\n            data: event.data,\n            status: 'fulfilled'\n          };\n\n        case 'reject':\n          parent === null || parent === void 0 ? void 0 : parent.send(actions.error(id, event.error));\n          observers.forEach(function (observer) {\n            observer.error(event.error);\n          });\n          return {\n            error: event.error,\n            data: undefined,\n            status: 'rejected'\n          };\n\n        default:\n          return state;\n      }\n    },\n    initialState: initialState,\n    start: function (_a) {\n      var self = _a.self;\n      promiseFn().then(function (data) {\n        self.send({\n          type: 'fulfill',\n          data: data\n        });\n      }, function (reason) {\n        self.send({\n          type: 'reject',\n          error: reason\n        });\n      });\n      return initialState;\n    }\n  };\n}\nfunction spawnBehavior(behavior, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var state = behavior.initialState;\n  var observers = new Set();\n  var mailbox = [];\n  var flushing = false;\n\n  var flush = function () {\n    if (flushing) {\n      return;\n    }\n\n    flushing = true;\n\n    while (mailbox.length > 0) {\n      var event_1 = mailbox.shift();\n      state = behavior.transition(state, event_1, actorCtx);\n      observers.forEach(function (observer) {\n        return observer.next(state);\n      });\n    }\n\n    flushing = false;\n  };\n\n  var actor = Actor.toActorRef({\n    id: options.id,\n    send: function (event) {\n      mailbox.push(event);\n      flush();\n    },\n    getSnapshot: function () {\n      return state;\n    },\n    subscribe: function (next, handleError, complete) {\n      var observer = utils.toObserver(next, handleError, complete);\n      observers.add(observer);\n      observer.next(state);\n      return {\n        unsubscribe: function () {\n          observers.delete(observer);\n        }\n      };\n    }\n  });\n  var actorCtx = {\n    parent: options.parent,\n    self: actor,\n    id: options.id || 'anonymous',\n    observers: observers\n  };\n  state = behavior.start ? behavior.start(actorCtx) : state;\n  return actor;\n}\n\nexports.fromPromise = fromPromise;\nexports.fromReducer = fromReducer;\nexports.spawnBehavior = spawnBehavior;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}